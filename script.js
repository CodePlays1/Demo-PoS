 const _0x344f57=_0x2534;(function(_0x1cfd5b,_0x5c6912){const _0x17dc2f=_0x2534,_0x1f506c=_0x1cfd5b();while(!![]){try{const _0x25566b=-parseInt(_0x17dc2f(0x11a))/0x1*(-parseInt(_0x17dc2f(0x289))/0x2)+parseInt(_0x17dc2f(0x294))/0x3*(parseInt(_0x17dc2f(0x1af))/0x4)+-parseInt(_0x17dc2f(0x1e5))/0x5*(parseInt(_0x17dc2f(0x140))/0x6)+parseInt(_0x17dc2f(0x1eb))/0x7*(-parseInt(_0x17dc2f(0x244))/0x8)+-parseInt(_0x17dc2f(0x28a))/0x9*(parseInt(_0x17dc2f(0x214))/0xa)+parseInt(_0x17dc2f(0x259))/0xb+parseInt(_0x17dc2f(0x26f))/0xc*(parseInt(_0x17dc2f(0x2a0))/0xd);if(_0x25566b===_0x5c6912)break;else _0x1f506c['push'](_0x1f506c['shift']());}catch(_0x69e133){_0x1f506c['push'](_0x1f506c['shift']());}}}(_0x4f2c,0xee222));let products=[],categories=[],sales=[],purchases=[],suppliers=[],customers=[],settings={'store':{'name':_0x344f57(0x1b5),'address':_0x344f57(0x119),'phone':_0x344f57(0x22d),'email':_0x344f57(0x1c7),'taxId':_0x344f57(0x23a)},'tax':{'rate':0xf,'inclusive':![]},'smtp':{'host':'','port':'','username':'','password':'','security':_0x344f57(0x124)}};const sections={'dashboard':document[_0x344f57(0x202)](_0x344f57(0x210)),'inventory':document[_0x344f57(0x202)](_0x344f57(0x10c)),'categories':document[_0x344f57(0x202)](_0x344f57(0x1bc)),'categoryForm':document[_0x344f57(0x202)](_0x344f57(0x158)),'productForm':document[_0x344f57(0x202)](_0x344f57(0x20c)),'sales':document['getElementById'](_0x344f57(0x20f)),'saleForm':document['getElementById']('sale-form-section'),'invoice':document[_0x344f57(0x202)]('invoice-section'),'purchase':document[_0x344f57(0x202)](_0x344f57(0x18b)),'purchaseForm':document[_0x344f57(0x202)](_0x344f57(0x172)),'purchaseInvoice':document[_0x344f57(0x202)]('purchase-invoice-section'),'suppliers':document[_0x344f57(0x202)]('suppliers-section'),'supplierForm':document[_0x344f57(0x202)](_0x344f57(0x133)),'customers':document[_0x344f57(0x202)](_0x344f57(0x163)),'customerForm':document[_0x344f57(0x202)]('customer-form-section'),'reports':document[_0x344f57(0x202)](_0x344f57(0x154)),'settings':document[_0x344f57(0x202)](_0x344f57(0x1d5))},sidebarLinks=document[_0x344f57(0x26c)](_0x344f57(0x1a1)),inventoryTable=document[_0x344f57(0x202)](_0x344f57(0x221)),categoriesTable=document[_0x344f57(0x202)](_0x344f57(0x14b)),recentProductsTable=document[_0x344f57(0x202)](_0x344f57(0x1ff)),recentInvoicesTable=document['getElementById']('recent-invoices'),salesTable=document[_0x344f57(0x202)](_0x344f57(0x2a8)),purchaseTable=document[_0x344f57(0x202)](_0x344f57(0x1d6)),suppliersTable=document[_0x344f57(0x202)]('suppliers-table'),customersTable=document['getElementById']('customers-table'),topProductsTable=document[_0x344f57(0x202)](_0x344f57(0x25f)),inventoryMovementTable=document['getElementById'](_0x344f57(0x1c6)),productForm=document[_0x344f57(0x202)](_0x344f57(0x264)),categoryForm=document[_0x344f57(0x202)](_0x344f57(0x16a)),supplierForm=document['getElementById']('supplier-form'),customerForm=document[_0x344f57(0x202)](_0x344f57(0x2a3)),storeSettingsForm=document[_0x344f57(0x202)]('store-settings-form'),taxSettingsForm=document[_0x344f57(0x202)](_0x344f57(0x12a)),smtpSettingsForm=document[_0x344f57(0x202)]('smtp-settings-form'),saleItemsTable=document['getElementById'](_0x344f57(0x1e2)),purchaseItemsTable=document[_0x344f57(0x202)](_0x344f57(0x286)),invoiceItemsTable=document[_0x344f57(0x202)](_0x344f57(0x28e)),purchaseInvoiceItemsTable=document['getElementById'](_0x344f57(0x246)),addProductBtn=document[_0x344f57(0x202)](_0x344f57(0x1fb)),cancelProductBtn=document[_0x344f57(0x202)](_0x344f57(0x249)),saveProductBtn=document['getElementById']('save-product'),addCategoryBtn=document['getElementById'](_0x344f57(0x1a6)),cancelCategoryBtn=document[_0x344f57(0x202)](_0x344f57(0x218)),saveCategoryBtn=document[_0x344f57(0x202)](_0x344f57(0x260)),addSupplierBtn=document[_0x344f57(0x202)]('add-supplier-btn'),cancelSupplierBtn=document[_0x344f57(0x202)](_0x344f57(0x1ad)),saveSupplierBtn=document['getElementById'](_0x344f57(0x2a1)),addCustomerBtn=document[_0x344f57(0x202)](_0x344f57(0x250)),cancelCustomerBtn=document[_0x344f57(0x202)](_0x344f57(0x276)),saveCustomerBtn=document[_0x344f57(0x202)](_0x344f57(0x29a)),addSaleBtn=document[_0x344f57(0x202)](_0x344f57(0x1e0)),cancelSaleBtn=document['getElementById'](_0x344f57(0x1ba)),saveSaleBtn=document[_0x344f57(0x202)](_0x344f57(0x170)),addPurchaseBtn=document[_0x344f57(0x202)]('add-purchase-btn'),cancelPurchaseBtn=document[_0x344f57(0x202)](_0x344f57(0x28b)),savePurchaseBtn=document['getElementById'](_0x344f57(0x168)),addSaleItemBtn=document['getElementById'](_0x344f57(0x1fe)),addPurchaseItemBtn=document[_0x344f57(0x202)](_0x344f57(0x159)),exportInventoryBtn=document[_0x344f57(0x202)]('export-inventory'),importInventoryBtn=document[_0x344f57(0x202)](_0x344f57(0x1f7)),importInventoryFile=document['getElementById']('import-inventory-file'),exportSalesBtn=document['getElementById'](_0x344f57(0x105)),printSalesBtn=document[_0x344f57(0x202)]('print-sales'),exportPurchasesBtn=document['getElementById']('export-purchases'),printPurchasesBtn=document['getElementById'](_0x344f57(0x10f)),exportSuppliersBtn=document[_0x344f57(0x202)]('export-suppliers'),exportCustomersBtn=document[_0x344f57(0x202)](_0x344f57(0x17e)),exportReportBtn=document[_0x344f57(0x202)](_0x344f57(0x24a)),printReportBtn=document[_0x344f57(0x202)](_0x344f57(0x195)),printDashboardBtn=document[_0x344f57(0x202)](_0x344f57(0x1a3)),printInvoiceBtn=document['getElementById']('print-invoice'),printInvoiceBtn2=document[_0x344f57(0x202)](_0x344f57(0x1b1)),printPurchaseInvoiceBtn=document[_0x344f57(0x202)](_0x344f57(0x129)),printPurchaseInvoiceBtn2=document[_0x344f57(0x202)]('print-purchase-invoice-btn'),sendInvoiceBtn=document[_0x344f57(0x202)]('send-invoice'),backToSalesBtn=document[_0x344f57(0x202)]('back-to-sales'),backToPurchasesBtn=document[_0x344f57(0x202)](_0x344f57(0x224)),testSmtpBtn=document['getElementById'](_0x344f57(0x113)),imageUpload=document['getElementById'](_0x344f57(0x153)),productImageInput=document[_0x344f57(0x202)](_0x344f57(0x107)),imagePreview=document['getElementById'](_0x344f57(0x164)),productSupplier=document['getElementById']('product-supplier'),productCategory=document[_0x344f57(0x202)](_0x344f57(0x27f)),saleProduct=document[_0x344f57(0x202)](_0x344f57(0x279)),purchaseProduct=document[_0x344f57(0x202)](_0x344f57(0x127)),purchaseSupplier=document['getElementById']('purchase-supplier');function init(){const _0x54465e=_0x344f57;loadSettings();const _0x35becc=new Date()[_0x54465e(0x151)]()[_0x54465e(0x19c)]('T')[0x0];document[_0x54465e(0x202)]('sale-date')[_0x54465e(0x1e9)]=_0x35becc,document[_0x54465e(0x202)](_0x54465e(0x1c8))[_0x54465e(0x1e9)]=_0x35becc;const _0x24643e=document['getElementById'](_0x54465e(0x298));populateCustomerDropdown(_0x24643e),setupEventListeners(),showSection('dashboard'),updateDashboard();}function setupEventListeners(){const _0x11c73f=_0x344f57;sidebarLinks[_0x11c73f(0x19e)](_0x180992=>{const _0x2a27b8=_0x11c73f;_0x180992[_0x2a27b8(0x230)](_0x2a27b8(0x26e),_0x276a60=>{const _0x450a85=_0x2a27b8;_0x276a60[_0x450a85(0x1c5)]();const _0x179d33=_0x180992[_0x450a85(0x109)](_0x450a85(0x165));showSection(_0x179d33),sidebarLinks[_0x450a85(0x19e)](_0x231cf2=>_0x231cf2[_0x450a85(0x2a2)][_0x450a85(0x266)](_0x450a85(0x1d7))),_0x180992[_0x450a85(0x2a2)][_0x450a85(0x204)](_0x450a85(0x1d7));if(_0x179d33===_0x450a85(0x1db))updateDashboard();else{if(_0x179d33===_0x450a85(0x263))loadProducts();else{if(_0x179d33===_0x450a85(0x273))loadCategories();else{if(_0x179d33===_0x450a85(0x178))loadSales();else{if(_0x179d33===_0x450a85(0x27c))loadPurchases();else{if(_0x179d33===_0x450a85(0x213))loadSuppliers();else{if(_0x179d33===_0x450a85(0x11c))loadCustomers();else{if(_0x179d33===_0x450a85(0x203))loadReports();else _0x179d33===_0x450a85(0x130)&&loadSettingsForm();}}}}}}}});}),addProductBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0x2e0c4a=_0x11c73f;showSection(_0x2e0c4a(0x292)),document[_0x2e0c4a(0x202)](_0x2e0c4a(0x1a2))[_0x2e0c4a(0x287)]='إضافة\x20منتج\x20جديد',productForm[_0x2e0c4a(0x1f1)](),imagePreview[_0x2e0c4a(0x205)]['display']=_0x2e0c4a(0x247),document[_0x2e0c4a(0x202)](_0x2e0c4a(0x216))[_0x2e0c4a(0x1e9)]='',populateSupplierDropdown(),populateCategoryDropdown();}),cancelProductBtn[_0x11c73f(0x230)]('click',()=>{const _0x435638=_0x11c73f;showSection(_0x435638(0x263));}),productForm['addEventListener'](_0x11c73f(0x120),_0x10ff8c=>{const _0x53e786=_0x11c73f;_0x10ff8c[_0x53e786(0x1c5)](),saveProduct();}),addCategoryBtn['addEventListener']('click',()=>{const _0x5d9b71=_0x11c73f;showSection('categoryForm'),document['getElementById'](_0x5d9b71(0x10e))[_0x5d9b71(0x287)]=_0x5d9b71(0x25e),categoryForm[_0x5d9b71(0x1f1)](),document[_0x5d9b71(0x202)](_0x5d9b71(0x156))[_0x5d9b71(0x1e9)]='';}),cancelCategoryBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0xb0246=_0x11c73f;showSection(_0xb0246(0x273));}),categoryForm[_0x11c73f(0x230)](_0x11c73f(0x120),_0x3570b5=>{const _0x84c060=_0x11c73f;_0x3570b5[_0x84c060(0x1c5)](),saveCategory();}),imageUpload[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0x1787a5=_0x11c73f;productImageInput[_0x1787a5(0x26e)]();}),productImageInput[_0x11c73f(0x230)](_0x11c73f(0x29c),_0x3f12a5=>{const _0xced8=_0x11c73f,_0x589f18=_0x3f12a5[_0xced8(0x12b)]['files'][0x0];if(_0x589f18){const _0x16ef4d=new FileReader();_0x16ef4d[_0xced8(0x1f8)]=_0x491cdb=>{const _0xd9614f=_0xced8;imagePreview[_0xd9614f(0x1c0)]=_0x491cdb[_0xd9614f(0x12b)][_0xd9614f(0x253)],imagePreview['style']['display']=_0xd9614f(0x1d1);},_0x16ef4d[_0xced8(0x27a)](_0x589f18);}}),addSupplierBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0xf134ed=_0x11c73f;showSection(_0xf134ed(0x15b)),document[_0xf134ed(0x202)](_0xf134ed(0x19f))[_0xf134ed(0x287)]='إضافة\x20مورد\x20جديد',supplierForm[_0xf134ed(0x1f1)](),document['getElementById'](_0xf134ed(0x1a5))[_0xf134ed(0x1e9)]='';}),cancelSupplierBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{showSection('suppliers');}),supplierForm[_0x11c73f(0x230)](_0x11c73f(0x120),_0x163430=>{const _0xa9ac60=_0x11c73f;_0x163430[_0xa9ac60(0x1c5)](),saveSupplier();}),addCustomerBtn[_0x11c73f(0x230)]('click',()=>{const _0x2542e3=_0x11c73f;showSection(_0x2542e3(0x16c)),document[_0x2542e3(0x202)](_0x2542e3(0x207))[_0x2542e3(0x287)]=_0x2542e3(0x20a),customerForm[_0x2542e3(0x1f1)](),document[_0x2542e3(0x202)]('customer-id')[_0x2542e3(0x1e9)]='';}),cancelCustomerBtn[_0x11c73f(0x230)]('click',()=>{const _0x23cd64=_0x11c73f;showSection(_0x23cd64(0x11c));}),customerForm[_0x11c73f(0x230)]('submit',_0x133e4a=>{const _0x168e45=_0x11c73f;_0x133e4a[_0x168e45(0x1c5)](),saveCustomer();}),addSaleBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0xb03687=_0x11c73f;document['getElementById']('sale-form-title')[_0xb03687(0x287)]=_0xb03687(0x1b7),document['getElementById']('sale-items-table')[_0xb03687(0x23d)]='',document[_0xb03687(0x202)](_0xb03687(0x14d))[_0xb03687(0x287)]=_0xb03687(0x188),document[_0xb03687(0x202)](_0xb03687(0x16d))[_0xb03687(0x287)]='0.00',document[_0xb03687(0x202)](_0xb03687(0x176))[_0xb03687(0x287)]=_0xb03687(0x188),document[_0xb03687(0x202)](_0xb03687(0x270))['textContent']=_0xb03687(0x188),populateProductDropdown(saleProduct),populateCustomerDropdown(document[_0xb03687(0x202)](_0xb03687(0x298))),showSection(_0xb03687(0x10a));}),cancelSaleBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{showSection('sales');}),addSaleItemBtn[_0x11c73f(0x230)]('click',()=>{addSaleItem();}),saveSaleBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{saveSale();}),addPurchaseBtn[_0x11c73f(0x230)]('click',()=>{const _0x4913e6=_0x11c73f;showSection('purchaseForm'),document[_0x4913e6(0x202)](_0x4913e6(0x1ea))[_0x4913e6(0x287)]='إضافة\x20فاتورة\x20شراء',document['getElementById']('purchase-items-table')['innerHTML']='',document[_0x4913e6(0x202)](_0x4913e6(0x18a))[_0x4913e6(0x287)]='0.00',document['getElementById'](_0x4913e6(0x160))['textContent']='0.00',document[_0x4913e6(0x202)]('purchase-tax-amount')['textContent']=_0x4913e6(0x188),document[_0x4913e6(0x202)](_0x4913e6(0x290))[_0x4913e6(0x287)]=_0x4913e6(0x188),populateProductDropdown(purchaseProduct),populateSupplierDropdown(purchaseSupplier);}),cancelPurchaseBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0x427473=_0x11c73f;showSection(_0x427473(0x27c));}),addPurchaseItemBtn[_0x11c73f(0x230)]('click',()=>{addPurchaseItem();}),savePurchaseBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{savePurchase();}),printInvoiceBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0x580195=_0x11c73f;window[_0x580195(0x112)]();}),printInvoiceBtn2['addEventListener'](_0x11c73f(0x26e),()=>{window['print']();}),printPurchaseInvoiceBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{window['print']();}),printPurchaseInvoiceBtn2[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{window['print']();}),sendInvoiceBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{sendInvoice();}),backToSalesBtn['addEventListener']('click',()=>{showSection('sales');}),backToPurchasesBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{showSection('purchase');}),exportInventoryBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{exportToExcel(products,'المخزون');}),importInventoryBtn['addEventListener'](_0x11c73f(0x26e),()=>{const _0x3be27c=_0x11c73f;importInventoryFile[_0x3be27c(0x26e)]();}),importInventoryFile[_0x11c73f(0x230)](_0x11c73f(0x29c),_0x56e6ab=>{const _0x2c6e4f=_0x11c73f;importFromExcel(_0x56e6ab[_0x2c6e4f(0x12b)][_0x2c6e4f(0x248)][0x0],'products');}),exportSalesBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0x17d6a4=_0x11c73f;exportToExcel(sales,_0x17d6a4(0x254));}),printSalesBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{window['print']();}),exportPurchasesBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0x37fca5=_0x11c73f;exportToExcel(purchases,_0x37fca5(0x24c));}),printPurchasesBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{window['print']();}),exportSuppliersBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{exportToExcel(suppliers,'الموردون');}),exportCustomersBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{exportToExcel(customers,'العملاء');}),exportReportBtn['addEventListener']('click',()=>{exportReportsToExcel();}),printReportBtn['addEventListener'](_0x11c73f(0x26e),()=>{window['print']();}),printDashboardBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{const _0x5596bd=_0x11c73f;window[_0x5596bd(0x112)]();}),document[_0x11c73f(0x202)]('inventory-search')[_0x11c73f(0x230)]('input',_0x3a8a92=>{const _0x2cf770=_0x11c73f;filterProducts(_0x3a8a92[_0x2cf770(0x12b)][_0x2cf770(0x1e9)]);}),document[_0x11c73f(0x202)]('category-search')[_0x11c73f(0x230)](_0x11c73f(0x174),_0x29ba6c=>{const _0x58e5f=_0x11c73f;filterCategories(_0x29ba6c[_0x58e5f(0x12b)][_0x58e5f(0x1e9)]);}),document[_0x11c73f(0x202)]('sales-search')['addEventListener'](_0x11c73f(0x174),_0x23a1ac=>{const _0x16b6c4=_0x11c73f;filterSales(_0x23a1ac[_0x16b6c4(0x12b)][_0x16b6c4(0x1e9)]);}),document[_0x11c73f(0x202)]('purchase-search')['addEventListener'](_0x11c73f(0x174),_0x3fc9bb=>{const _0x2eaf0b=_0x11c73f;filterPurchases(_0x3fc9bb[_0x2eaf0b(0x12b)]['value']);}),document[_0x11c73f(0x202)](_0x11c73f(0x1de))[_0x11c73f(0x230)](_0x11c73f(0x174),_0x7927ea=>{const _0x567d8f=_0x11c73f;filterSuppliers(_0x7927ea[_0x567d8f(0x12b)][_0x567d8f(0x1e9)]);}),document['getElementById']('customer-search')[_0x11c73f(0x230)](_0x11c73f(0x174),_0x1f0251=>{const _0x1b2c67=_0x11c73f;filterCustomers(_0x1f0251[_0x1b2c67(0x12b)][_0x1b2c67(0x1e9)]);}),document['getElementById']('sale-discount')['addEventListener'](_0x11c73f(0x174),()=>{updateSaleTotal();}),document[_0x11c73f(0x202)](_0x11c73f(0x1d9))[_0x11c73f(0x230)](_0x11c73f(0x174),()=>{updateSaleTotal();}),document[_0x11c73f(0x202)](_0x11c73f(0x1a4))['addEventListener'](_0x11c73f(0x174),()=>{updatePurchaseTotal();}),document[_0x11c73f(0x202)](_0x11c73f(0x1e7))['addEventListener'](_0x11c73f(0x174),()=>{updatePurchaseTotal();}),storeSettingsForm[_0x11c73f(0x230)](_0x11c73f(0x120),_0x68a2c7=>{const _0x177b1a=_0x11c73f;_0x68a2c7[_0x177b1a(0x1c5)](),saveStoreSettings();}),taxSettingsForm[_0x11c73f(0x230)](_0x11c73f(0x120),_0x8d757e=>{const _0xb257a2=_0x11c73f;_0x8d757e[_0xb257a2(0x1c5)](),saveTaxSettings();}),smtpSettingsForm[_0x11c73f(0x230)](_0x11c73f(0x120),_0x59770f=>{const _0x388531=_0x11c73f;_0x59770f[_0x388531(0x1c5)](),saveSmtpSettings();}),testSmtpBtn[_0x11c73f(0x230)](_0x11c73f(0x26e),()=>{testSmtpConnection();});}function showSection(_0x4fd814){const _0x46aae8=_0x344f57;Object[_0x46aae8(0x232)](sections)[_0x46aae8(0x19e)](_0x1d2f06=>{const _0x2ab7ad=_0x46aae8;_0x1d2f06===_0x4fd814?sections[_0x1d2f06][_0x2ab7ad(0x205)][_0x2ab7ad(0x227)]='block':sections[_0x1d2f06][_0x2ab7ad(0x205)][_0x2ab7ad(0x227)]=_0x2ab7ad(0x247);});}function updateDashboard(){const _0x3b3dde=_0x344f57,_0x310e11=products[_0x3b3dde(0x2a5)]((_0x33cad8,_0x7f97a3)=>_0x33cad8+(_0x7f97a3['unitsPurchased']-_0x7f97a3[_0x3b3dde(0x191)]),0x0),_0x489590=sales['reduce']((_0x5a7ca6,_0x234817)=>_0x5a7ca6+calculateSaleTotal(_0x234817),0x0),_0x438bb7=purchases[_0x3b3dde(0x2a5)]((_0xd9cef,_0x25acae)=>_0xd9cef+calculatePurchaseTotal(_0x25acae),0x0),_0x47dbc8=_0x489590-_0x438bb7;document[_0x3b3dde(0x202)](_0x3b3dde(0x1f9))[_0x3b3dde(0x287)]=_0x310e11,document[_0x3b3dde(0x202)]('total-sales')[_0x3b3dde(0x287)]=_0x489590[_0x3b3dde(0x222)](0x2),document['getElementById']('total-purchases')['textContent']=_0x438bb7[_0x3b3dde(0x222)](0x2),document['getElementById'](_0x3b3dde(0x23e))[_0x3b3dde(0x287)]=_0x47dbc8[_0x3b3dde(0x222)](0x2),loadRecentProducts(),loadRecentInvoices();}function loadRecentProducts(){const _0x36d5cc=_0x344f57;recentProductsTable['innerHTML']='';const _0x34612f=[...products]['sort']((_0x3b0555,_0x46180c)=>new Date(_0x46180c['createdAt']||0x0)-new Date(_0x3b0555[_0x36d5cc(0x242)]||0x0))[_0x36d5cc(0x189)](0x0,0x5);_0x34612f['forEach'](_0x81886c=>{const _0x4a3686=_0x36d5cc,_0x166ea7=_0x81886c[_0x4a3686(0x1fa)]-_0x81886c[_0x4a3686(0x191)],_0x9a0735=categories['find'](_0xff42fd=>_0xff42fd['id']===_0x81886c['categoryId']);let _0x3d9ff8='',_0x49a5e2='';if(_0x166ea7<=0x0)_0x3d9ff8='نفذ\x20من\x20المخزون',_0x49a5e2=_0x4a3686(0x27b);else _0x166ea7<=_0x81886c[_0x4a3686(0x26b)]?(_0x3d9ff8=_0x4a3686(0x185),_0x49a5e2=_0x4a3686(0x17f)):(_0x3d9ff8=_0x4a3686(0x162),_0x49a5e2='high');const _0x32ede6=document[_0x4a3686(0x192)]('tr');_0x32ede6[_0x4a3686(0x23d)]=_0x4a3686(0x200)+(_0x81886c['image']||_0x4a3686(0x17d))+_0x4a3686(0x272)+_0x81886c[_0x4a3686(0x2a6)]+_0x4a3686(0x131)+_0x81886c[_0x4a3686(0x2a6)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x9a0735?_0x9a0735['name']:_0x4a3686(0x157))+_0x4a3686(0x1b6)+_0x166ea7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x81886c['salesPrice'][_0x4a3686(0x222)](0x2)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22status\x20'+_0x49a5e2+'\x22>'+_0x3d9ff8+_0x4a3686(0x288)+_0x81886c['id']+_0x4a3686(0x24b),recentProductsTable[_0x4a3686(0x169)](_0x32ede6),_0x32ede6[_0x4a3686(0x16e)](_0x4a3686(0x21f))[_0x4a3686(0x230)](_0x4a3686(0x26e),_0x2699b2=>{const _0x29e70e=_0x4a3686,_0x161258=parseInt(_0x32ede6[_0x29e70e(0x16e)](_0x29e70e(0x21f))[_0x29e70e(0x109)](_0x29e70e(0x117)));editProduct(_0x161258);});});}function loadRecentInvoices(){const _0x3c8b07=_0x344f57;recentInvoicesTable['innerHTML']='';const _0x2c2b96=[...sales['map'](_0x89da1f=>({..._0x89da1f,'type':_0x3c8b07(0x240)})),...purchases[_0x3c8b07(0x1d2)](_0xa1c5b=>({..._0xa1c5b,'type':'purchase'}))][_0x3c8b07(0x28c)]((_0x250620,_0x59c00a)=>new Date(_0x59c00a[_0x3c8b07(0x25b)])-new Date(_0x250620[_0x3c8b07(0x25b)]))[_0x3c8b07(0x189)](0x0,0x5);_0x2c2b96[_0x3c8b07(0x19e)](_0x2261f7=>{const _0x30d6e9=_0x3c8b07,_0x14e186=_0x2261f7[_0x30d6e9(0x258)]===_0x30d6e9(0x240)?calculateSaleTotal(_0x2261f7):calculatePurchaseTotal(_0x2261f7),_0x324d7c=_0x2261f7[_0x30d6e9(0x258)]==='sale'?_0x2261f7[_0x30d6e9(0x1b8)]||_0x30d6e9(0x20d):suppliers[_0x30d6e9(0x11f)](_0x5e2b96=>_0x5e2b96['id']===_0x2261f7[_0x30d6e9(0x1e8)])?.[_0x30d6e9(0x2a6)]||_0x30d6e9(0x17c);let _0x1f3341='',_0x4f14cb='';switch(_0x2261f7[_0x30d6e9(0x121)]){case'completed':_0x1f3341='مكتمل',_0x4f14cb=_0x30d6e9(0x118);break;case _0x30d6e9(0x212):_0x1f3341=_0x30d6e9(0x1a0),_0x4f14cb=_0x30d6e9(0x212);break;case _0x30d6e9(0x245):_0x1f3341=_0x30d6e9(0x255),_0x4f14cb=_0x30d6e9(0x245);break;default:_0x1f3341=_0x30d6e9(0x241),_0x4f14cb='';}const _0x2c3702=document['createElement']('tr');_0x2c3702[_0x30d6e9(0x23d)]=_0x30d6e9(0x17b)+_0x2261f7['id']+_0x30d6e9(0x1b6)+_0x2261f7[_0x30d6e9(0x25b)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2261f7[_0x30d6e9(0x258)]===_0x30d6e9(0x240)?_0x30d6e9(0x116):_0x30d6e9(0x1b2))+_0x30d6e9(0x1b6)+_0x324d7c+_0x30d6e9(0x1b6)+_0x14e186[_0x30d6e9(0x222)](0x2)+_0x30d6e9(0x187)+_0x4f14cb+'\x22>'+_0x1f3341+_0x30d6e9(0x280)+_0x2261f7['id']+_0x30d6e9(0x136)+_0x2261f7[_0x30d6e9(0x258)]+_0x30d6e9(0x1fc),recentInvoicesTable[_0x30d6e9(0x169)](_0x2c3702),_0x2c3702[_0x30d6e9(0x16e)](_0x30d6e9(0x208))[_0x30d6e9(0x230)](_0x30d6e9(0x26e),_0x1b6b50=>{const _0x3f7b3c=_0x30d6e9,_0x27d451=parseInt(_0x2c3702[_0x3f7b3c(0x16e)](_0x3f7b3c(0x208))[_0x3f7b3c(0x109)](_0x3f7b3c(0x117))),_0x5818d3=_0x2c3702[_0x3f7b3c(0x16e)](_0x3f7b3c(0x208))[_0x3f7b3c(0x109)]('data-type');viewInvoice(_0x27d451,_0x5818d3);});});}function viewInvoice(_0x4916a7,_0x63fb92){const _0x5c8aec=_0x344f57;if(_0x63fb92===_0x5c8aec(0x240)){const _0x3e1691=sales[_0x5c8aec(0x11f)](_0x3a1505=>_0x3a1505['id']===_0x4916a7);if(!_0x3e1691)return;document[_0x5c8aec(0x202)](_0x5c8aec(0x15a))[_0x5c8aec(0x287)]=_0x5c8aec(0x1bb)+_0x3e1691['id'],document[_0x5c8aec(0x202)](_0x5c8aec(0x281))[_0x5c8aec(0x287)]=_0x3e1691['date'],document[_0x5c8aec(0x202)](_0x5c8aec(0x237))[_0x5c8aec(0x287)]=getPaymentMethodName(_0x3e1691[_0x5c8aec(0x114)]),document[_0x5c8aec(0x202)]('invoice-status')['textContent']=getStatusName(_0x3e1691[_0x5c8aec(0x121)]),document[_0x5c8aec(0x202)](_0x5c8aec(0x1b9))[_0x5c8aec(0x23c)]=_0x5c8aec(0x1a8)+getStatusClass(_0x3e1691[_0x5c8aec(0x121)]),document[_0x5c8aec(0x202)](_0x5c8aec(0x295))[_0x5c8aec(0x287)]=_0x3e1691[_0x5c8aec(0x1b8)]||'عميل\x20بدون\x20اسم',document['getElementById'](_0x5c8aec(0x22f))['textContent']=_0x3e1691[_0x5c8aec(0x29f)]||_0x5c8aec(0x138),document[_0x5c8aec(0x202)](_0x5c8aec(0x175))[_0x5c8aec(0x287)]=_0x3e1691[_0x5c8aec(0x13e)]||_0x5c8aec(0x138),document['getElementById'](_0x5c8aec(0x256))[_0x5c8aec(0x287)]=settings[_0x5c8aec(0x155)]['name'],document[_0x5c8aec(0x202)](_0x5c8aec(0x196))['textContent']=settings['store'][_0x5c8aec(0x1cb)],document[_0x5c8aec(0x202)](_0x5c8aec(0x1c9))['textContent']=settings[_0x5c8aec(0x155)][_0x5c8aec(0x1ce)],document['getElementById'](_0x5c8aec(0x1d0))[_0x5c8aec(0x287)]=_0x5c8aec(0x261)+settings[_0x5c8aec(0x155)]['taxId'],invoiceItemsTable['innerHTML']='',_0x3e1691[_0x5c8aec(0x238)][_0x5c8aec(0x19e)]((_0xb34130,_0x2e3691)=>{const _0x5647ef=_0x5c8aec,_0x1dc0c4=products[_0x5647ef(0x11f)](_0x167a8b=>_0x167a8b['id']===_0xb34130['productId']);if(!_0x1dc0c4)return;const _0x5d39aa=document[_0x5647ef(0x192)]('tr');_0x5d39aa['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2e3691+0x1)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1dc0c4['name']+_0x5647ef(0x26d)+_0xb34130[_0x5647ef(0x14a)][_0x5647ef(0x222)](0x2)+_0x5647ef(0x26d)+_0xb34130['quantity']+_0x5647ef(0x26d)+(_0xb34130[_0x5647ef(0x14a)]*_0xb34130[_0x5647ef(0x199)])[_0x5647ef(0x222)](0x2)+_0x5647ef(0x223),invoiceItemsTable['appendChild'](_0x5d39aa);});const _0x190a3f=customers[_0x5c8aec(0x11f)](_0x28fd5a=>_0x28fd5a['id']===_0x3e1691['customerId']);document[_0x5c8aec(0x202)]('invoice-customer-name')[_0x5c8aec(0x287)]=_0x190a3f?.[_0x5c8aec(0x2a6)]||_0x3e1691[_0x5c8aec(0x1b8)]||_0x5c8aec(0x20d),document['getElementById'](_0x5c8aec(0x22f))[_0x5c8aec(0x287)]=_0x190a3f?.['phone']||_0x5c8aec(0x138),document[_0x5c8aec(0x202)]('invoice-customer-address')[_0x5c8aec(0x287)]=_0x190a3f?.[_0x5c8aec(0x1cb)]||_0x5c8aec(0x138);const _0x18f717=calculateSaleSubtotal(_0x3e1691),_0x514d0b=calculateSaleDiscount(_0x3e1691,_0x18f717),_0x55aca1=calculateSaleTax(_0x3e1691,_0x18f717-_0x514d0b),_0x50f8a3=_0x18f717-_0x514d0b+_0x55aca1;document[_0x5c8aec(0x202)](_0x5c8aec(0x143))['textContent']=_0x18f717[_0x5c8aec(0x222)](0x2),document[_0x5c8aec(0x202)]('invoice-discount')[_0x5c8aec(0x287)]=_0x514d0b[_0x5c8aec(0x222)](0x2),document['getElementById'](_0x5c8aec(0x236))[_0x5c8aec(0x287)]=_0x55aca1['toFixed'](0x2),document[_0x5c8aec(0x202)](_0x5c8aec(0x251))[_0x5c8aec(0x287)]=_0x50f8a3[_0x5c8aec(0x222)](0x2),showSection(_0x5c8aec(0x13b));}else{if(_0x63fb92==='purchase'){const _0x563413=purchases['find'](_0xf32973=>_0xf32973['id']===_0x4916a7);if(!_0x563413)return;document['getElementById'](_0x5c8aec(0x1ae))[_0x5c8aec(0x287)]='PUR-'+_0x563413['id'],document[_0x5c8aec(0x202)]('purchase-invoice-date')[_0x5c8aec(0x287)]=_0x563413[_0x5c8aec(0x25b)],document[_0x5c8aec(0x202)](_0x5c8aec(0x19b))[_0x5c8aec(0x287)]=getPaymentMethodName(_0x563413[_0x5c8aec(0x114)]),document[_0x5c8aec(0x202)](_0x5c8aec(0x29e))[_0x5c8aec(0x287)]=getStatusName(_0x563413['status']),document[_0x5c8aec(0x202)](_0x5c8aec(0x29e))[_0x5c8aec(0x23c)]='badge\x20badge-'+getStatusClass(_0x563413['status']);const _0x55d269=suppliers['find'](_0x401356=>_0x401356['id']===_0x563413['supplierId']);document[_0x5c8aec(0x202)]('purchase-invoice-supplier-name')['textContent']=_0x55d269?.['name']||'مورد\x20بدون\x20اسم',document[_0x5c8aec(0x202)](_0x5c8aec(0x134))[_0x5c8aec(0x287)]=_0x55d269?.[_0x5c8aec(0x1ce)]||_0x5c8aec(0x138),document['getElementById'](_0x5c8aec(0x22a))[_0x5c8aec(0x287)]=_0x55d269?.[_0x5c8aec(0x1cb)]||_0x5c8aec(0x138),document[_0x5c8aec(0x202)]('purchase-invoice-business-name')[_0x5c8aec(0x287)]=settings[_0x5c8aec(0x155)][_0x5c8aec(0x2a6)],document[_0x5c8aec(0x202)](_0x5c8aec(0x184))[_0x5c8aec(0x287)]=settings[_0x5c8aec(0x155)][_0x5c8aec(0x1cb)],document[_0x5c8aec(0x202)]('purchase-invoice-business-phone')['textContent']=settings['store'][_0x5c8aec(0x1ce)],document['getElementById'](_0x5c8aec(0x1b4))['textContent']=_0x5c8aec(0x261)+settings[_0x5c8aec(0x155)]['taxId'],purchaseInvoiceItemsTable[_0x5c8aec(0x23d)]='',_0x563413[_0x5c8aec(0x238)][_0x5c8aec(0x19e)]((_0x2651e4,_0x65b968)=>{const _0xe9420d=_0x5c8aec,_0x44ebfc=products[_0xe9420d(0x11f)](_0x5048fd=>_0x5048fd['id']===_0x2651e4[_0xe9420d(0x1e4)]);if(!_0x44ebfc)return;const _0x13ff92=document[_0xe9420d(0x192)]('tr');_0x13ff92[_0xe9420d(0x23d)]=_0xe9420d(0x1ca)+(_0x65b968+0x1)+_0xe9420d(0x26d)+_0x44ebfc[_0xe9420d(0x2a6)]+_0xe9420d(0x26d)+_0x2651e4[_0xe9420d(0x14a)][_0xe9420d(0x222)](0x2)+_0xe9420d(0x26d)+_0x2651e4['quantity']+_0xe9420d(0x26d)+(_0x2651e4[_0xe9420d(0x14a)]*_0x2651e4[_0xe9420d(0x199)])[_0xe9420d(0x222)](0x2)+_0xe9420d(0x223),purchaseInvoiceItemsTable[_0xe9420d(0x169)](_0x13ff92);});const _0x8d8dc6=calculatePurchaseSubtotal(_0x563413),_0x392208=calculatePurchaseDiscount(_0x563413,_0x8d8dc6),_0x214ced=calculatePurchaseTax(_0x563413,_0x8d8dc6-_0x392208),_0x56ec29=_0x8d8dc6-_0x392208+_0x214ced;document[_0x5c8aec(0x202)](_0x5c8aec(0x15c))['textContent']=_0x8d8dc6[_0x5c8aec(0x222)](0x2),document[_0x5c8aec(0x202)]('purchase-invoice-discount')['textContent']=_0x392208['toFixed'](0x2),document['getElementById']('purchase-invoice-tax')['textContent']=_0x214ced['toFixed'](0x2),document[_0x5c8aec(0x202)]('purchase-invoice-total')[_0x5c8aec(0x287)]=_0x56ec29[_0x5c8aec(0x222)](0x2),showSection(_0x5c8aec(0x1e1));}}}function loadProducts(){const _0x382c64=_0x344f57;inventoryTable['innerHTML']='',products[_0x382c64(0x19e)](_0x3a31d2=>{const _0x1ab8b1=_0x382c64,_0x2773c0=_0x3a31d2[_0x1ab8b1(0x1fa)]-_0x3a31d2[_0x1ab8b1(0x191)],_0x16ae3e=categories['find'](_0x1e9007=>_0x1e9007['id']===_0x3a31d2[_0x1ab8b1(0x234)]);let _0x933ba3='',_0x4811f='';if(_0x2773c0<=0x0)_0x933ba3=_0x1ab8b1(0x186),_0x4811f=_0x1ab8b1(0x27b);else _0x2773c0<=_0x3a31d2[_0x1ab8b1(0x26b)]?(_0x933ba3=_0x1ab8b1(0x185),_0x4811f=_0x1ab8b1(0x17f)):(_0x933ba3='متاح',_0x4811f=_0x1ab8b1(0x21a));const _0x4063bf=document[_0x1ab8b1(0x192)]('tr');_0x4063bf[_0x1ab8b1(0x23d)]=_0x1ab8b1(0x200)+(_0x3a31d2[_0x1ab8b1(0x167)]||_0x1ab8b1(0x17d))+_0x1ab8b1(0x272)+_0x3a31d2[_0x1ab8b1(0x2a6)]+_0x1ab8b1(0x131)+_0x3a31d2[_0x1ab8b1(0x2a6)]+_0x1ab8b1(0x1b6)+(_0x16ae3e?_0x16ae3e[_0x1ab8b1(0x2a6)]:'بدون\x20فئة')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a31d2[_0x1ab8b1(0x115)][_0x1ab8b1(0x222)](0x2)+_0x1ab8b1(0x1b6)+_0x3a31d2[_0x1ab8b1(0x182)]['toFixed'](0x2)+_0x1ab8b1(0x1b6)+_0x2773c0+_0x1ab8b1(0x187)+_0x4811f+'\x22>'+_0x933ba3+_0x1ab8b1(0x288)+_0x3a31d2['id']+'\x22><i\x20class=\x22fas\x20fa-edit\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20delete\x22\x20data-id=\x22'+_0x3a31d2['id']+_0x1ab8b1(0x11e),inventoryTable[_0x1ab8b1(0x169)](_0x4063bf),_0x4063bf['querySelector'](_0x1ab8b1(0x21f))[_0x1ab8b1(0x230)](_0x1ab8b1(0x26e),_0x49555b=>{const _0x33742b=_0x1ab8b1,_0x155279=parseInt(_0x4063bf[_0x33742b(0x16e)](_0x33742b(0x21f))[_0x33742b(0x109)]('data-id'));editProduct(_0x155279);}),_0x4063bf['querySelector'](_0x1ab8b1(0x161))['addEventListener'](_0x1ab8b1(0x26e),_0x27f5df=>{const _0x4ea1ae=_0x1ab8b1,_0x456fe3=parseInt(_0x4063bf['querySelector'](_0x4ea1ae(0x161))[_0x4ea1ae(0x109)](_0x4ea1ae(0x117)));deleteProduct(_0x456fe3);});}),populateProductDropdown(saleProduct),populateProductDropdown(purchaseProduct);}function loadCategories(){const _0xc05b33=_0x344f57;categoriesTable[_0xc05b33(0x23d)]='',categories[_0xc05b33(0x19e)](_0x5e41fb=>{const _0x24b457=_0xc05b33,_0x5e179c=products[_0x24b457(0x284)](_0x3f5089=>_0x3f5089[_0x24b457(0x234)]===_0x5e41fb['id'])[_0x24b457(0x12e)],_0x2d3f1a=document[_0x24b457(0x192)]('tr');_0x2d3f1a[_0x24b457(0x23d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5e41fb['name']+_0x24b457(0x1b6)+(_0x5e41fb[_0x24b457(0x1fd)]||_0x24b457(0x23f))+_0x24b457(0x1b6)+_0x5e179c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22badge\x20badge-'+_0x5e41fb[_0x24b457(0x18c)]+'\x22>'+_0x5e41fb[_0x24b457(0x18c)]+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20edit\x22\x20data-id=\x22'+_0x5e41fb['id']+_0x24b457(0x137)+_0x5e41fb['id']+_0x24b457(0x11e),categoriesTable['appendChild'](_0x2d3f1a),_0x2d3f1a[_0x24b457(0x16e)](_0x24b457(0x21f))['addEventListener']('click',_0x3b630a=>{const _0x277cff=_0x24b457,_0x3cfb4a=parseInt(_0x2d3f1a[_0x277cff(0x16e)](_0x277cff(0x21f))[_0x277cff(0x109)]('data-id'));editCategory(_0x3cfb4a);}),_0x2d3f1a['querySelector'](_0x24b457(0x161))[_0x24b457(0x230)](_0x24b457(0x26e),_0x2db15f=>{const _0x43b8e9=_0x24b457,_0x27f3d2=parseInt(_0x2d3f1a[_0x43b8e9(0x16e)](_0x43b8e9(0x161))[_0x43b8e9(0x109)](_0x43b8e9(0x117)));deleteCategory(_0x27f3d2);});});}function loadSales(){const _0x16213f=_0x344f57;salesTable[_0x16213f(0x23d)]='',sales['forEach'](_0x4521cb=>{const _0x5b43fb=_0x16213f,_0x104daf=calculateSaleTotal(_0x4521cb),_0x39238e=_0x4521cb[_0x5b43fb(0x238)][_0x5b43fb(0x1d2)](_0x2ac707=>{const _0x25ecee=_0x5b43fb,_0x4a908c=products[_0x25ecee(0x11f)](_0x3acaea=>_0x3acaea['id']===_0x2ac707['productId']);return _0x4a908c?_0x4a908c[_0x25ecee(0x2a6)]:'Unknown\x20Product';})['join'](',\x20'),_0x3cfa57=_0x4521cb['items'][_0x5b43fb(0x1d2)](_0x4af5dc=>_0x4af5dc[_0x5b43fb(0x199)])['join'](',\x20');let _0x5e2683='',_0x200da7='';switch(_0x4521cb[_0x5b43fb(0x121)]){case'completed':_0x5e2683=_0x5b43fb(0x12c),_0x200da7=_0x5b43fb(0x118);break;case'shipped':_0x5e2683=_0x5b43fb(0x1a0),_0x200da7=_0x5b43fb(0x212);break;case _0x5b43fb(0x245):_0x5e2683=_0x5b43fb(0x255),_0x200da7=_0x5b43fb(0x245);break;default:_0x5e2683=_0x5b43fb(0x241),_0x200da7='';}const _0x519838=document['createElement']('tr');_0x519838[_0x5b43fb(0x23d)]=_0x5b43fb(0x17b)+_0x4521cb['id']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4521cb[_0x5b43fb(0x25b)]+_0x5b43fb(0x1b6)+(_0x4521cb[_0x5b43fb(0x1b8)]||_0x5b43fb(0x20d))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x39238e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3cfa57+_0x5b43fb(0x1b6)+_0x104daf[_0x5b43fb(0x222)](0x2)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22status\x20'+_0x200da7+'\x22>'+_0x5e2683+_0x5b43fb(0x280)+_0x4521cb['id']+_0x5b43fb(0x1f0)+_0x4521cb['id']+_0x5b43fb(0x11e),salesTable[_0x5b43fb(0x169)](_0x519838),_0x519838[_0x5b43fb(0x16e)](_0x5b43fb(0x208))[_0x5b43fb(0x230)](_0x5b43fb(0x26e),_0x538bc1=>{const _0xd33c7e=_0x5b43fb,_0x3882e3=parseInt(_0x519838[_0xd33c7e(0x16e)](_0xd33c7e(0x208))['getAttribute'](_0xd33c7e(0x117)));viewInvoice(_0x3882e3,_0xd33c7e(0x240));}),_0x519838[_0x5b43fb(0x16e)](_0x5b43fb(0x161))['addEventListener'](_0x5b43fb(0x26e),_0x141417=>{const _0x3fc516=_0x5b43fb,_0xed01d=parseInt(_0x519838[_0x3fc516(0x16e)](_0x3fc516(0x161))['getAttribute'](_0x3fc516(0x117)));deleteSale(_0xed01d);});});}function loadPurchases(){const _0x53b300=_0x344f57;purchaseTable[_0x53b300(0x23d)]='',purchases[_0x53b300(0x19e)](_0x8e54ca=>{const _0x28c1e3=_0x53b300,_0x173561=calculatePurchaseTotal(_0x8e54ca),_0x55a0b4=suppliers[_0x28c1e3(0x11f)](_0x12f851=>_0x12f851['id']===_0x8e54ca['supplierId']),_0xcd468d=_0x55a0b4?_0x55a0b4[_0x28c1e3(0x2a6)]:_0x28c1e3(0x27d),_0x1ef594=_0x8e54ca['items'][_0x28c1e3(0x1d2)](_0x389838=>{const _0x13e478=_0x28c1e3,_0x277384=products[_0x13e478(0x11f)](_0xca5daf=>_0xca5daf['id']===_0x389838[_0x13e478(0x1e4)]);return _0x277384?_0x277384[_0x13e478(0x2a6)]:_0x13e478(0x16f);})[_0x28c1e3(0x11b)](',\x20'),_0x556dca=_0x8e54ca[_0x28c1e3(0x238)][_0x28c1e3(0x1d2)](_0x1675d2=>_0x1675d2[_0x28c1e3(0x199)])[_0x28c1e3(0x11b)](',\x20');let _0x10a75f='',_0x2089cf='';switch(_0x8e54ca['status']){case'completed':_0x10a75f=_0x28c1e3(0x12c),_0x2089cf='completed';break;case _0x28c1e3(0x212):_0x10a75f=_0x28c1e3(0x1a0),_0x2089cf=_0x28c1e3(0x212);break;case _0x28c1e3(0x245):_0x10a75f='قيد\x20الانتظار',_0x2089cf=_0x28c1e3(0x245);break;default:_0x10a75f=_0x28c1e3(0x241),_0x2089cf='';}const _0x44da5b=document[_0x28c1e3(0x192)]('tr');_0x44da5b[_0x28c1e3(0x23d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x8e54ca['id']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x8e54ca[_0x28c1e3(0x25b)]+_0x28c1e3(0x1b6)+_0xcd468d+_0x28c1e3(0x1b6)+_0x1ef594+_0x28c1e3(0x1b6)+_0x556dca+_0x28c1e3(0x1b6)+_0x173561[_0x28c1e3(0x222)](0x2)+_0x28c1e3(0x187)+_0x2089cf+'\x22>'+_0x10a75f+_0x28c1e3(0x280)+_0x8e54ca['id']+_0x28c1e3(0x1f0)+_0x8e54ca['id']+_0x28c1e3(0x11e),purchaseTable['appendChild'](_0x44da5b),_0x44da5b['querySelector']('.action-btn.view')[_0x28c1e3(0x230)](_0x28c1e3(0x26e),_0x536395=>{const _0xc58498=_0x28c1e3,_0x50678f=parseInt(_0x44da5b[_0xc58498(0x16e)](_0xc58498(0x208))[_0xc58498(0x109)]('data-id'));viewInvoice(_0x50678f,_0xc58498(0x27c));}),_0x44da5b['querySelector'](_0x28c1e3(0x161))[_0x28c1e3(0x230)](_0x28c1e3(0x26e),_0x30ba26=>{const _0x52edda=_0x28c1e3,_0x1302ad=parseInt(_0x44da5b['querySelector']('.action-btn.delete')[_0x52edda(0x109)]('data-id'));deletePurchase(_0x1302ad);});});}function loadSuppliers(){const _0x3bf287=_0x344f57;suppliersTable[_0x3bf287(0x23d)]='',suppliers[_0x3bf287(0x19e)](_0x43d000=>{const _0x24dd17=_0x3bf287,_0x524e7c=purchases[_0x24dd17(0x284)](_0x1a05c0=>_0x1a05c0[_0x24dd17(0x1e8)]===_0x43d000['id'])['length'],_0x233841=document[_0x24dd17(0x192)]('tr');_0x233841['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x43d000['name']+_0x24dd17(0x1b6)+_0x43d000[_0x24dd17(0x19d)]+_0x24dd17(0x1b6)+_0x43d000[_0x24dd17(0x2a7)]+_0x24dd17(0x1b6)+_0x43d000[_0x24dd17(0x1ce)]+_0x24dd17(0x1b6)+_0x524e7c+_0x24dd17(0x1b3)+_0x43d000['id']+_0x24dd17(0x137)+_0x43d000['id']+_0x24dd17(0x11e),suppliersTable[_0x24dd17(0x169)](_0x233841),_0x233841[_0x24dd17(0x16e)](_0x24dd17(0x21f))['addEventListener'](_0x24dd17(0x26e),_0x2360d2=>{const _0x569482=_0x24dd17,_0x8ed4da=parseInt(_0x233841['querySelector'](_0x569482(0x21f))['getAttribute']('data-id'));editSupplier(_0x8ed4da);}),_0x233841[_0x24dd17(0x16e)](_0x24dd17(0x161))['addEventListener']('click',_0x5b50f5=>{const _0x5cf613=_0x24dd17,_0x12e857=parseInt(_0x233841['querySelector'](_0x5cf613(0x161))[_0x5cf613(0x109)](_0x5cf613(0x117)));deleteSupplier(_0x12e857);});}),populateSupplierDropdown(),populateSupplierDropdown(purchaseSupplier);}function loadCustomers(){const _0x264a27=_0x344f57;customersTable[_0x264a27(0x23d)]='',customers[_0x264a27(0x19e)](_0x56d6e4=>{const _0x481b7e=_0x264a27,_0x1e62ef=sales[_0x481b7e(0x284)](_0x17b652=>_0x17b652['customerId']===_0x56d6e4['id'])[_0x481b7e(0x12e)],_0xd5293e=document[_0x481b7e(0x192)]('tr');_0xd5293e[_0x481b7e(0x23d)]=_0x481b7e(0x17b)+_0x56d6e4[_0x481b7e(0x2a6)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x56d6e4[_0x481b7e(0x2a7)]+_0x481b7e(0x1b6)+_0x56d6e4[_0x481b7e(0x1ce)]+_0x481b7e(0x1b6)+_0x56d6e4[_0x481b7e(0x1cb)]+_0x481b7e(0x1b6)+_0x1e62ef+_0x481b7e(0x1b3)+_0x56d6e4['id']+_0x481b7e(0x137)+_0x56d6e4['id']+_0x481b7e(0x11e),customersTable['appendChild'](_0xd5293e),_0xd5293e[_0x481b7e(0x16e)]('.action-btn.edit')[_0x481b7e(0x230)](_0x481b7e(0x26e),_0x287002=>{const _0x35069f=_0x481b7e,_0x592cc1=parseInt(_0xd5293e[_0x35069f(0x16e)]('.action-btn.edit')[_0x35069f(0x109)](_0x35069f(0x117)));editCustomer(_0x592cc1);}),_0xd5293e['querySelector'](_0x481b7e(0x161))['addEventListener']('click',_0x309898=>{const _0x49bfa1=_0x481b7e,_0x44b8e0=parseInt(_0xd5293e[_0x49bfa1(0x16e)](_0x49bfa1(0x161))[_0x49bfa1(0x109)](_0x49bfa1(0x117)));deleteCustomer(_0x44b8e0);});});}function loadReports(){const _0x136684=_0x344f57;topProductsTable[_0x136684(0x23d)]='',inventoryMovementTable['innerHTML']='';const _0x142d12=[...products][_0x136684(0x28c)]((_0x5a1da0,_0x3c5715)=>_0x3c5715[_0x136684(0x191)]*_0x3c5715[_0x136684(0x182)]-_0x5a1da0[_0x136684(0x191)]*_0x5a1da0[_0x136684(0x182)]);_0x142d12[_0x136684(0x189)](0x0,0x5)[_0x136684(0x19e)]((_0x378593,_0x40ca5e)=>{const _0x1ca430=_0x136684,_0x571a58=_0x378593[_0x1ca430(0x191)]*_0x378593[_0x1ca430(0x182)],_0xab8440=_0x571a58-_0x378593[_0x1ca430(0x191)]*_0x378593[_0x1ca430(0x115)],_0x581dfa=_0xab8440/_0x571a58*0x64,_0x378f6e=document[_0x1ca430(0x192)]('tr');_0x378f6e[_0x1ca430(0x23d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x40ca5e+0x1)+_0x1ca430(0x1b6)+_0x378593['name']+_0x1ca430(0x1b6)+_0x378593[_0x1ca430(0x191)]+_0x1ca430(0x1b6)+_0x571a58[_0x1ca430(0x222)](0x2)+_0x1ca430(0x1b6)+_0x581dfa['toFixed'](0x1)+_0x1ca430(0x13d),topProductsTable[_0x1ca430(0x169)](_0x378f6e);}),products[_0x136684(0x19e)](_0x28642f=>{const _0x5c37e9=_0x136684,_0x18b5b7=_0x28642f[_0x5c37e9(0x1fa)]-_0x28642f['unitsSold'];let _0x1fe227='',_0x45fd0b='';if(_0x18b5b7<=0x0)_0x1fe227='نفذ\x20من\x20المخزون',_0x45fd0b=_0x5c37e9(0x27b);else _0x18b5b7<=_0x28642f[_0x5c37e9(0x26b)]?(_0x1fe227=_0x5c37e9(0x185),_0x45fd0b=_0x5c37e9(0x17f)):(_0x1fe227=_0x5c37e9(0x162),_0x45fd0b=_0x5c37e9(0x21a));const _0x36653d=document[_0x5c37e9(0x192)]('tr');_0x36653d[_0x5c37e9(0x23d)]=_0x5c37e9(0x17b)+_0x28642f[_0x5c37e9(0x2a6)]+_0x5c37e9(0x1b6)+_0x28642f[_0x5c37e9(0x1fa)]+_0x5c37e9(0x1b6)+_0x28642f[_0x5c37e9(0x1fa)]+_0x5c37e9(0x1b6)+_0x28642f[_0x5c37e9(0x191)]+_0x5c37e9(0x1b6)+_0x18b5b7+_0x5c37e9(0x187)+_0x45fd0b+'\x22>'+_0x1fe227+_0x5c37e9(0x15e),inventoryMovementTable[_0x5c37e9(0x169)](_0x36653d);});const _0x4ab236=sales[_0x136684(0x2a5)]((_0x21b2bd,_0x329275)=>_0x21b2bd+calculateSaleTotal(_0x329275),0x0),_0x2c9410=purchases[_0x136684(0x2a5)]((_0x16a401,_0x587b7d)=>_0x16a401+calculatePurchaseTotal(_0x587b7d),0x0),_0x4f8659=_0x4ab236-_0x2c9410,_0xbcc170=sales[_0x136684(0x12e)]+purchases[_0x136684(0x12e)];document[_0x136684(0x202)](_0x136684(0x15f))[_0x136684(0x287)]=_0x4ab236[_0x136684(0x222)](0x2),document['getElementById']('report-purchases')['textContent']=_0x2c9410[_0x136684(0x222)](0x2),document['getElementById'](_0x136684(0x148))[_0x136684(0x287)]=_0x4f8659[_0x136684(0x222)](0x2),document[_0x136684(0x202)](_0x136684(0x12f))[_0x136684(0x287)]=_0xbcc170;}function loadSettingsForm(){const _0x19cd22=_0x344f57;document[_0x19cd22(0x202)](_0x19cd22(0x1e6))[_0x19cd22(0x1e9)]=settings[_0x19cd22(0x155)][_0x19cd22(0x2a6)],document[_0x19cd22(0x202)]('store-address')['value']=settings['store']['address'],document[_0x19cd22(0x202)](_0x19cd22(0x296))[_0x19cd22(0x1e9)]=settings[_0x19cd22(0x155)]['phone'],document[_0x19cd22(0x202)]('store-email')[_0x19cd22(0x1e9)]=settings['store'][_0x19cd22(0x2a7)],document['getElementById'](_0x19cd22(0x297))['value']=settings[_0x19cd22(0x155)]['taxId'],document[_0x19cd22(0x202)](_0x19cd22(0x28f))['value']=settings[_0x19cd22(0x11d)]['rate'],document[_0x19cd22(0x202)](_0x19cd22(0x16b))[_0x19cd22(0x1e9)]=settings[_0x19cd22(0x11d)][_0x19cd22(0x18d)]?_0x19cd22(0x18d):'exclusive',document[_0x19cd22(0x202)](_0x19cd22(0x180))[_0x19cd22(0x1e9)]=settings['smtp']['host'],document[_0x19cd22(0x202)](_0x19cd22(0x173))[_0x19cd22(0x1e9)]=settings[_0x19cd22(0x179)]['port'],document[_0x19cd22(0x202)]('smtp-username')[_0x19cd22(0x1e9)]=settings['smtp'][_0x19cd22(0x282)],document[_0x19cd22(0x202)](_0x19cd22(0x183))['value']=settings[_0x19cd22(0x179)][_0x19cd22(0x299)],document[_0x19cd22(0x202)](_0x19cd22(0x29d))[_0x19cd22(0x1e9)]=settings[_0x19cd22(0x179)]['security'];}function populateSupplierDropdown(_0x54f976=productSupplier){const _0x3849db=_0x344f57;_0x54f976[_0x3849db(0x23d)]='<option\x20value=\x22\x22>اختر\x20مورداً</option>',suppliers[_0x3849db(0x19e)](_0x24299c=>{const _0x59e7b8=_0x3849db,_0xb5f8cd=document['createElement']('option');_0xb5f8cd['value']=_0x24299c['id'],_0xb5f8cd[_0x59e7b8(0x287)]=_0x24299c[_0x59e7b8(0x2a6)],_0x54f976[_0x59e7b8(0x169)](_0xb5f8cd);});}function populateCategoryDropdown(){const _0x55fd79=_0x344f57;productCategory[_0x55fd79(0x23d)]='<option\x20value=\x22\x22>اختر\x20فئة</option>',categories['forEach'](_0x17d684=>{const _0xa8be81=_0x55fd79,_0x1cd173=document[_0xa8be81(0x192)](_0xa8be81(0x233));_0x1cd173['value']=_0x17d684['id'],_0x1cd173[_0xa8be81(0x287)]=_0x17d684[_0xa8be81(0x2a6)],productCategory['appendChild'](_0x1cd173);});}function populateProductDropdown(_0x233a6c){const _0xe38572=_0x344f57;_0x233a6c[_0xe38572(0x23d)]='<option\x20value=\x22\x22>اختر\x20منتجاً</option>',products[_0xe38572(0x19e)](_0x1ffb34=>{const _0x538ebc=_0xe38572,_0x5d73aa=_0x1ffb34[_0x538ebc(0x1fa)]-_0x1ffb34[_0x538ebc(0x191)];if(_0x5d73aa>0x0){const _0x3eee4c=document['createElement'](_0x538ebc(0x233));_0x3eee4c[_0x538ebc(0x1e9)]=_0x1ffb34['id'],_0x3eee4c['textContent']=_0x1ffb34[_0x538ebc(0x2a6)]+'\x20('+_0x5d73aa+_0x538ebc(0x132),_0x233a6c[_0x538ebc(0x169)](_0x3eee4c);}});}function populateCustomerDropdown(_0xc26034){const _0x336f7e=_0x344f57;_0xc26034['innerHTML']=_0x336f7e(0x142),customers[_0x336f7e(0x19e)](_0x258c32=>{const _0x24a1fe=_0x336f7e,_0x778436=document[_0x24a1fe(0x192)](_0x24a1fe(0x233));_0x778436[_0x24a1fe(0x1e9)]=_0x258c32['id'],_0x778436[_0x24a1fe(0x287)]=_0x258c32['name'],_0xc26034[_0x24a1fe(0x169)](_0x778436);});}function editProduct(_0x324158){const _0x686a1f=_0x344f57,_0x16bece=products[_0x686a1f(0x11f)](_0x1db865=>_0x1db865['id']===_0x324158);_0x16bece&&(showSection(_0x686a1f(0x292)),document[_0x686a1f(0x202)]('product-form-title')[_0x686a1f(0x287)]=_0x686a1f(0x144),document[_0x686a1f(0x202)](_0x686a1f(0x216))[_0x686a1f(0x1e9)]=_0x16bece['id'],document[_0x686a1f(0x202)](_0x686a1f(0x278))['value']=_0x16bece[_0x686a1f(0x2a6)],document[_0x686a1f(0x202)](_0x686a1f(0x1d3))[_0x686a1f(0x1e9)]=_0x16bece[_0x686a1f(0x1fd)]||'',document[_0x686a1f(0x202)](_0x686a1f(0x100))[_0x686a1f(0x1e9)]=_0x16bece[_0x686a1f(0x115)],document[_0x686a1f(0x202)](_0x686a1f(0x29b))['value']=_0x16bece[_0x686a1f(0x182)],document['getElementById'](_0x686a1f(0x18e))[_0x686a1f(0x1e9)]=_0x16bece[_0x686a1f(0x1fa)],document[_0x686a1f(0x202)](_0x686a1f(0x239))[_0x686a1f(0x1e9)]=_0x16bece[_0x686a1f(0x26b)]||0x5,document[_0x686a1f(0x202)]('product-barcode')[_0x686a1f(0x1e9)]=_0x16bece[_0x686a1f(0x22b)]||'',document[_0x686a1f(0x202)]('product-supplier')[_0x686a1f(0x1e9)]=_0x16bece[_0x686a1f(0x1e8)]||'',document[_0x686a1f(0x202)](_0x686a1f(0x27f))[_0x686a1f(0x1e9)]=_0x16bece[_0x686a1f(0x234)]||'',_0x16bece['image']?(imagePreview[_0x686a1f(0x1c0)]=_0x16bece[_0x686a1f(0x167)],imagePreview[_0x686a1f(0x205)][_0x686a1f(0x227)]=_0x686a1f(0x1d1)):imagePreview['style']['display']='none',populateSupplierDropdown(),populateCategoryDropdown());}function saveProduct(){const _0xe57359=_0x344f57,_0x38882d=document['getElementById'](_0xe57359(0x216))[_0xe57359(0x1e9)],_0x3b430f=document['getElementById'](_0xe57359(0x278))[_0xe57359(0x1e9)],_0xfa80f7=document[_0xe57359(0x202)](_0xe57359(0x1d3))[_0xe57359(0x1e9)],_0x541309=parseFloat(document['getElementById'](_0xe57359(0x100))[_0xe57359(0x1e9)]),_0x5ca103=parseFloat(document['getElementById'](_0xe57359(0x29b))[_0xe57359(0x1e9)]),_0x58aa61=parseInt(document[_0xe57359(0x202)](_0xe57359(0x18e))[_0xe57359(0x1e9)]),_0x13b25c=parseInt(document[_0xe57359(0x202)](_0xe57359(0x239))[_0xe57359(0x1e9)]),_0x22fa53=document['getElementById'](_0xe57359(0x110))[_0xe57359(0x1e9)],_0x488554=parseInt(document[_0xe57359(0x202)]('product-supplier')[_0xe57359(0x1e9)])||null,_0x29a6cd=parseInt(document[_0xe57359(0x202)](_0xe57359(0x27f))[_0xe57359(0x1e9)])||null,_0x1be953=imagePreview['src']['startsWith'](_0xe57359(0x269))?imagePreview['src']:'';if(_0x38882d){const _0x75c332=products[_0xe57359(0x122)](_0xd4e5fe=>_0xd4e5fe['id']===parseInt(_0x38882d));if(_0x75c332!==-0x1){const _0xcf8911=products[_0x75c332];products[_0x75c332]={..._0xcf8911,'name':_0x3b430f,'description':_0xfa80f7,'purchasePrice':_0x541309,'salesPrice':_0x5ca103,'unitsPurchased':_0x58aa61,'lowStockThreshold':_0x13b25c,'barcode':_0x22fa53,'supplierId':_0x488554,'categoryId':_0x29a6cd,'image':_0x1be953||_0xcf8911[_0xe57359(0x167)]};}}else{const _0x2ccdfa=products[_0xe57359(0x12e)]>0x0?Math['max'](...products[_0xe57359(0x1d2)](_0xf8eca9=>_0xf8eca9['id']))+0x1:0x1;products[_0xe57359(0x24f)]({'id':_0x2ccdfa,'name':_0x3b430f,'description':_0xfa80f7,'image':_0x1be953,'purchasePrice':_0x541309,'salesPrice':_0x5ca103,'unitsPurchased':_0x58aa61,'unitsSold':0x0,'lowStockThreshold':_0x13b25c,'barcode':_0x22fa53,'supplierId':_0x488554,'categoryId':_0x29a6cd,'createdAt':new Date()[_0xe57359(0x151)]()});}loadProducts(),showSection(_0xe57359(0x263)),Swal[_0xe57359(0x265)]({'icon':_0xe57359(0x257),'title':_0xe57359(0x268),'text':_0xe57359(0x209),'confirmButtonText':_0xe57359(0x228)});}function deleteProduct(_0x4796e5){const _0x595bd8=_0x344f57;Swal[_0x595bd8(0x265)]({'title':_0x595bd8(0x1e3),'text':_0x595bd8(0x277),'icon':_0x595bd8(0x1df),'showCancelButton':!![],'confirmButtonColor':_0x595bd8(0x25d),'cancelButtonColor':_0x595bd8(0x14f),'confirmButtonText':_0x595bd8(0x125),'cancelButtonText':'إلغاء'})[_0x595bd8(0x15d)](_0x260740=>{const _0x2fec7b=_0x595bd8;_0x260740['isConfirmed']&&(products=products[_0x2fec7b(0x284)](_0x443869=>_0x443869['id']!==_0x4796e5),loadProducts(),Swal[_0x2fec7b(0x265)]('تم\x20الحذف!','تم\x20حذف\x20المنتج\x20بنجاح.',_0x2fec7b(0x257)));});}function editCategory(_0x4f91d9){const _0x20e43c=_0x344f57,_0xec2df=categories[_0x20e43c(0x11f)](_0x35aea7=>_0x35aea7['id']===_0x4f91d9);_0xec2df&&(showSection(_0x20e43c(0x17a)),document[_0x20e43c(0x202)](_0x20e43c(0x10e))['textContent']='تعديل\x20الفئة',document[_0x20e43c(0x202)](_0x20e43c(0x156))[_0x20e43c(0x1e9)]=_0xec2df['id'],document[_0x20e43c(0x202)]('category-name')[_0x20e43c(0x1e9)]=_0xec2df[_0x20e43c(0x2a6)],document[_0x20e43c(0x202)]('category-description')[_0x20e43c(0x1e9)]=_0xec2df['description']||'',document[_0x20e43c(0x202)](_0x20e43c(0x1f4))['value']=_0xec2df[_0x20e43c(0x18c)]);}function saveCategory(){const _0x5054d5=_0x344f57,_0x5abde5=document['getElementById'](_0x5054d5(0x156))[_0x5054d5(0x1e9)],_0x1336ea=document[_0x5054d5(0x202)](_0x5054d5(0x171))[_0x5054d5(0x1e9)],_0x3fba84=document[_0x5054d5(0x202)](_0x5054d5(0x283))[_0x5054d5(0x1e9)],_0x466ea4=document[_0x5054d5(0x202)](_0x5054d5(0x1f4))['value'];if(_0x5abde5){const _0x3c8112=categories[_0x5054d5(0x122)](_0x2456ad=>_0x2456ad['id']===parseInt(_0x5abde5));_0x3c8112!==-0x1&&(categories[_0x3c8112]={...categories[_0x3c8112],'name':_0x1336ea,'description':_0x3fba84,'color':_0x466ea4});}else{const _0x3bfa6b=categories['length']>0x0?Math[_0x5054d5(0x267)](...categories[_0x5054d5(0x1d2)](_0x6ec823=>_0x6ec823['id']))+0x1:0x1;categories[_0x5054d5(0x24f)]({'id':_0x3bfa6b,'name':_0x1336ea,'description':_0x3fba84,'color':_0x466ea4});}loadCategories(),showSection(_0x5054d5(0x273)),Swal['fire']({'icon':_0x5054d5(0x257),'title':'تم\x20الحفظ\x20بنجاح','text':_0x5054d5(0x21c),'confirmButtonText':_0x5054d5(0x228)});}function deleteCategory(_0x2b1750){const _0x433fd3=_0x344f57,_0x2b9287=products[_0x433fd3(0x150)](_0x802fb7=>_0x802fb7[_0x433fd3(0x234)]===_0x2b1750);if(_0x2b9287){Swal[_0x433fd3(0x265)]({'icon':_0x433fd3(0x229),'title':_0x433fd3(0x111),'text':_0x433fd3(0x102),'confirmButtonText':_0x433fd3(0x228)});return;}Swal[_0x433fd3(0x265)]({'title':_0x433fd3(0x1e3),'text':_0x433fd3(0x285),'icon':'warning','showCancelButton':!![],'confirmButtonColor':_0x433fd3(0x25d),'cancelButtonColor':_0x433fd3(0x14f),'confirmButtonText':_0x433fd3(0x1d4),'cancelButtonText':'إلغاء'})[_0x433fd3(0x15d)](_0x510f30=>{const _0xa09b1b=_0x433fd3;_0x510f30['isConfirmed']&&(categories=categories[_0xa09b1b(0x284)](_0x4b8259=>_0x4b8259['id']!==_0x2b1750),loadCategories(),Swal[_0xa09b1b(0x265)](_0xa09b1b(0x147),_0xa09b1b(0x226),_0xa09b1b(0x257)));});}function editSupplier(_0x52606f){const _0x4d5a57=_0x344f57,_0xf3ce75=suppliers[_0x4d5a57(0x11f)](_0x5cdecc=>_0x5cdecc['id']===_0x52606f);_0xf3ce75&&(showSection(_0x4d5a57(0x15b)),document[_0x4d5a57(0x202)](_0x4d5a57(0x19f))['textContent']=_0x4d5a57(0x1ab),document[_0x4d5a57(0x202)](_0x4d5a57(0x1a5))['value']=_0xf3ce75['id'],document['getElementById'](_0x4d5a57(0x1aa))[_0x4d5a57(0x1e9)]=_0xf3ce75[_0x4d5a57(0x2a6)],document['getElementById']('contact-name')[_0x4d5a57(0x1e9)]=_0xf3ce75[_0x4d5a57(0x19d)],document[_0x4d5a57(0x202)](_0x4d5a57(0x25c))['value']=_0xf3ce75[_0x4d5a57(0x2a7)],document[_0x4d5a57(0x202)](_0x4d5a57(0x123))['value']=_0xf3ce75[_0x4d5a57(0x1ce)],document[_0x4d5a57(0x202)](_0x4d5a57(0x13a))[_0x4d5a57(0x1e9)]=_0xf3ce75[_0x4d5a57(0x1cb)],document[_0x4d5a57(0x202)]('supplier-notes')['value']=_0xf3ce75[_0x4d5a57(0x12d)]);}function saveSupplier(){const _0x13dac6=_0x344f57,_0x4802b0=document['getElementById'](_0x13dac6(0x1a5))[_0x13dac6(0x1e9)],_0x4c8a74=document[_0x13dac6(0x202)]('supplier-name')[_0x13dac6(0x1e9)],_0x2ab49f=document[_0x13dac6(0x202)](_0x13dac6(0x181))[_0x13dac6(0x1e9)],_0x4360fc=document[_0x13dac6(0x202)]('contact-email')[_0x13dac6(0x1e9)],_0x5a4a8d=document['getElementById']('contact-phone')[_0x13dac6(0x1e9)],_0x11f20e=document[_0x13dac6(0x202)](_0x13dac6(0x13a))[_0x13dac6(0x1e9)],_0x10363e=document['getElementById'](_0x13dac6(0x1da))[_0x13dac6(0x1e9)];if(_0x4802b0){const _0x21a8f7=suppliers[_0x13dac6(0x122)](_0x434886=>_0x434886['id']===parseInt(_0x4802b0));_0x21a8f7!==-0x1&&(suppliers[_0x21a8f7]={...suppliers[_0x21a8f7],'name':_0x4c8a74,'contactName':_0x2ab49f,'email':_0x4360fc,'phone':_0x5a4a8d,'address':_0x11f20e,'notes':_0x10363e});}else{const _0x89d1fb=suppliers['length']>0x0?Math[_0x13dac6(0x267)](...suppliers['map'](_0x3d3029=>_0x3d3029['id']))+0x1:0x1;suppliers[_0x13dac6(0x24f)]({'id':_0x89d1fb,'name':_0x4c8a74,'contactName':_0x2ab49f,'email':_0x4360fc,'phone':_0x5a4a8d,'address':_0x11f20e,'notes':_0x10363e});}loadSuppliers(),showSection(_0x13dac6(0x213)),Swal[_0x13dac6(0x265)]({'icon':_0x13dac6(0x257),'title':'تم\x20الحفظ\x20بنجاح','text':_0x13dac6(0x274),'confirmButtonText':'حسناً'});}function deleteSupplier(_0x235cf2){const _0x1bad35=_0x344f57,_0x2f8527=purchases[_0x1bad35(0x150)](_0x3fd2c7=>_0x3fd2c7[_0x1bad35(0x1e8)]===_0x235cf2);if(_0x2f8527){Swal['fire']({'icon':_0x1bad35(0x229),'title':_0x1bad35(0x111),'text':_0x1bad35(0x1cd),'confirmButtonText':'حسناً'});return;}Swal[_0x1bad35(0x265)]({'title':_0x1bad35(0x1e3),'text':_0x1bad35(0x13c),'icon':_0x1bad35(0x1df),'showCancelButton':!![],'confirmButtonColor':_0x1bad35(0x25d),'cancelButtonColor':_0x1bad35(0x14f),'confirmButtonText':_0x1bad35(0x125),'cancelButtonText':_0x1bad35(0x25a)})[_0x1bad35(0x15d)](_0x280350=>{const _0x3330d3=_0x1bad35;_0x280350[_0x3330d3(0x275)]&&(suppliers=suppliers[_0x3330d3(0x284)](_0x44d0ec=>_0x44d0ec['id']!==_0x235cf2),loadSuppliers(),Swal[_0x3330d3(0x265)](_0x3330d3(0x147),'تم\x20حذف\x20المورد\x20بنجاح.','success'));});}function editCustomer(_0x3eda3f){const _0x487889=_0x344f57,_0x103c61=customers['find'](_0x259852=>_0x259852['id']===_0x3eda3f);_0x103c61&&(showSection(_0x487889(0x16c)),document[_0x487889(0x202)](_0x487889(0x207))['textContent']='تعديل\x20العميل',document[_0x487889(0x202)](_0x487889(0x271))[_0x487889(0x1e9)]=_0x103c61['id'],document[_0x487889(0x202)](_0x487889(0x14c))['value']=_0x103c61[_0x487889(0x2a6)],document[_0x487889(0x202)](_0x487889(0x215))[_0x487889(0x1e9)]=_0x103c61[_0x487889(0x2a7)],document[_0x487889(0x202)](_0x487889(0x1cf))[_0x487889(0x1e9)]=_0x103c61[_0x487889(0x1ce)],document[_0x487889(0x202)](_0x487889(0x23b))[_0x487889(0x1e9)]=_0x103c61[_0x487889(0x1cb)],document[_0x487889(0x202)](_0x487889(0x139))[_0x487889(0x1e9)]=_0x103c61[_0x487889(0x12d)]);}function saveCustomer(){const _0x44cf57=_0x344f57,_0x4748fe=document[_0x44cf57(0x202)](_0x44cf57(0x271))[_0x44cf57(0x1e9)],_0x4c3b3d=document[_0x44cf57(0x202)](_0x44cf57(0x14c))[_0x44cf57(0x1e9)],_0x4238a7=document['getElementById'](_0x44cf57(0x215))['value'],_0x2b9b8c=document[_0x44cf57(0x202)]('customer-phone')[_0x44cf57(0x1e9)],_0x1d8a6e=document['getElementById'](_0x44cf57(0x23b))[_0x44cf57(0x1e9)],_0x299fa1=document['getElementById'](_0x44cf57(0x139))['value'];if(_0x4748fe){const _0x34494a=customers[_0x44cf57(0x122)](_0x52f2af=>_0x52f2af['id']===parseInt(_0x4748fe));_0x34494a!==-0x1&&(customers[_0x34494a]={...customers[_0x34494a],'name':_0x4c3b3d,'email':_0x4238a7,'phone':_0x2b9b8c,'address':_0x1d8a6e,'notes':_0x299fa1});}else{const _0x16d442=customers[_0x44cf57(0x12e)]>0x0?Math['max'](...customers[_0x44cf57(0x1d2)](_0x3326f5=>_0x3326f5['id']))+0x1:0x1;customers[_0x44cf57(0x24f)]({'id':_0x16d442,'name':_0x4c3b3d,'email':_0x4238a7,'phone':_0x2b9b8c,'address':_0x1d8a6e,'notes':_0x299fa1});}loadCustomers(),showSection(_0x44cf57(0x11c)),Swal[_0x44cf57(0x265)]({'icon':'success','title':_0x44cf57(0x268),'text':_0x44cf57(0x103),'confirmButtonText':_0x44cf57(0x228)});}function deleteCustomer(_0x2231a1){const _0x17141d=_0x344f57,_0x314a99=sales['some'](_0x2c46b8=>_0x2c46b8['customerId']===_0x2231a1);if(_0x314a99){Swal[_0x17141d(0x265)]({'icon':_0x17141d(0x229),'title':'خطأ','text':_0x17141d(0x194),'confirmButtonText':_0x17141d(0x228)});return;}Swal['fire']({'title':'هل\x20أنت\x20متأكد؟','text':_0x17141d(0x291),'icon':_0x17141d(0x1df),'showCancelButton':!![],'confirmButtonColor':_0x17141d(0x25d),'cancelButtonColor':_0x17141d(0x14f),'confirmButtonText':'نعم،\x20احذفه!','cancelButtonText':'إلغاء'})[_0x17141d(0x15d)](_0x471f64=>{const _0x399250=_0x17141d;_0x471f64['isConfirmed']&&(customers=customers[_0x399250(0x284)](_0x17f82c=>_0x17f82c['id']!==_0x2231a1),loadCustomers(),Swal[_0x399250(0x265)]('تم\x20الحذف!',_0x399250(0x104),'success'));});}function addSaleItem(){const _0x71fda8=_0x344f57,_0x43bc70=parseInt(saleProduct[_0x71fda8(0x1e9)]),_0xf905e3=parseInt(document['getElementById'](_0x71fda8(0x2a4))[_0x71fda8(0x1e9)]);if(!_0x43bc70||isNaN(_0xf905e3)||_0xf905e3<=0x0){Swal[_0x71fda8(0x265)]({'icon':_0x71fda8(0x229),'title':_0x71fda8(0x111),'text':_0x71fda8(0x225),'confirmButtonText':_0x71fda8(0x228)});return;}const _0x5eaefa=products[_0x71fda8(0x11f)](_0x53aa7c=>_0x53aa7c['id']===_0x43bc70);if(!_0x5eaefa)return;const _0x69ade8=_0x5eaefa[_0x71fda8(0x1fa)]-_0x5eaefa[_0x71fda8(0x191)];if(_0xf905e3>_0x69ade8){Swal[_0x71fda8(0x265)]({'icon':_0x71fda8(0x229),'title':_0x71fda8(0x111),'text':_0x71fda8(0x152)+_0xf905e3+_0x71fda8(0x177)+_0x69ade8+')','confirmButtonText':_0x71fda8(0x228)});return;}const _0x54da74=Array[_0x71fda8(0x193)](saleItemsTable[_0x71fda8(0x26c)]('tr'))[_0x71fda8(0x122)](_0xa605ad=>{const _0x4f4ba0=_0x71fda8;return parseInt(_0xa605ad['getAttribute'](_0x4f4ba0(0x14e)))===_0x43bc70;});if(_0x54da74!==-0x1){const _0x56748c=saleItemsTable[_0x71fda8(0x26c)]('tr')[_0x54da74],_0x237083=parseInt(_0x56748c[_0x71fda8(0x109)](_0x71fda8(0x243))),_0x2c7808=_0x237083+_0xf905e3;if(_0x2c7808>_0x69ade8){Swal['fire']({'icon':_0x71fda8(0x229),'title':'خطأ','text':_0x71fda8(0x231)+_0x2c7808+_0x71fda8(0x177)+_0x69ade8+')','confirmButtonText':_0x71fda8(0x228)});return;}_0x56748c[_0x71fda8(0x21b)]('data-quantity',_0x2c7808),_0x56748c['querySelector'](_0x71fda8(0x220))[_0x71fda8(0x287)]=_0x2c7808,_0x56748c[_0x71fda8(0x16e)](_0x71fda8(0x1c4))[_0x71fda8(0x287)]='$'+(_0x2c7808*_0x5eaefa[_0x71fda8(0x182)])['toFixed'](0x2);}else{const _0x3e054c=document['createElement']('tr');_0x3e054c['setAttribute'](_0x71fda8(0x14e),_0x43bc70),_0x3e054c['setAttribute'](_0x71fda8(0x243),_0xf905e3),_0x3e054c[_0x71fda8(0x21b)](_0x71fda8(0x1bd),_0x5eaefa[_0x71fda8(0x182)]),_0x3e054c[_0x71fda8(0x23d)]=_0x71fda8(0x17b)+_0x5eaefa['name']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>$'+_0x5eaefa['salesPrice'][_0x71fda8(0x222)](0x2)+_0x71fda8(0x1b6)+_0xf905e3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>$'+(_0xf905e3*_0x5eaefa['salesPrice'])[_0x71fda8(0x222)](0x2)+_0x71fda8(0x108)+_0x43bc70+_0x71fda8(0x128),saleItemsTable[_0x71fda8(0x169)](_0x3e054c),_0x3e054c[_0x71fda8(0x16e)]('.action-btn.delete')[_0x71fda8(0x230)](_0x71fda8(0x26e),_0x4bcb57=>{const _0x2d522f=_0x71fda8;_0x3e054c[_0x2d522f(0x266)](),updateSaleTotal();});}updateSaleTotal(),saleProduct[_0x71fda8(0x1e9)]='',document['getElementById']('sale-quantity')[_0x71fda8(0x1e9)]='1';}function updateSaleTotal(){const _0x5aabb=_0x344f57;let _0x5be949=0x0;Array[_0x5aabb(0x193)](saleItemsTable[_0x5aabb(0x26c)]('tr'))[_0x5aabb(0x19e)](_0x56a5b=>{const _0x59f2a8=_0x5aabb,_0x469e29=parseInt(_0x56a5b[_0x59f2a8(0x109)]('data-quantity')),_0x3e894d=parseFloat(_0x56a5b['getAttribute'](_0x59f2a8(0x1bd)));_0x5be949+=_0x469e29*_0x3e894d;});const _0x2908fc=document['getElementById'](_0x5aabb(0x217))[_0x5aabb(0x1e9)];let _0x2949b5=0x0;if(_0x2908fc){if(_0x2908fc[_0x5aabb(0x1bf)]('%')){const _0x1efb85=parseFloat(_0x2908fc[_0x5aabb(0x1dd)]('%',''));!isNaN(_0x1efb85)&&(_0x2949b5=_0x5be949*(_0x1efb85/0x64));}else{_0x2949b5=parseFloat(_0x2908fc);if(isNaN(_0x2949b5))_0x2949b5=0x0;}}const _0x48369e=parseFloat(document[_0x5aabb(0x202)](_0x5aabb(0x1d9))[_0x5aabb(0x1e9)])||0x0,_0x18220d=(_0x5be949-_0x2949b5)*(_0x48369e/0x64),_0x509429=_0x5be949-_0x2949b5+_0x18220d;document[_0x5aabb(0x202)]('sale-subtotal')[_0x5aabb(0x287)]=_0x5be949['toFixed'](0x2),document['getElementById'](_0x5aabb(0x16d))[_0x5aabb(0x287)]=_0x2949b5[_0x5aabb(0x222)](0x2),document['getElementById']('sale-tax-amount')[_0x5aabb(0x287)]=_0x18220d[_0x5aabb(0x222)](0x2),document[_0x5aabb(0x202)](_0x5aabb(0x270))['textContent']=_0x509429[_0x5aabb(0x222)](0x2);}function saveSale(){const _0x421696=_0x344f57,_0x590415=document['getElementById'](_0x421696(0x298)),_0x2cff34=_0x590415?parseInt(_0x590415[_0x421696(0x1e9)]):null,_0xae0f26=_0x2cff34?customers[_0x421696(0x11f)](_0x244f3c=>_0x244f3c['id']===_0x2cff34):null,_0x1583db=_0xae0f26?_0xae0f26[_0x421696(0x2a6)]:'',_0x148074=_0xae0f26?_0xae0f26[_0x421696(0x1ce)]:'',_0x5cd8bd=_0xae0f26?_0xae0f26[_0x421696(0x1cb)]:'',_0x398594=document['getElementById'](_0x421696(0x10d))['value'],_0x31780a=document[_0x421696(0x202)](_0x421696(0x101))[_0x421696(0x1e9)],_0x2ff94b=document['getElementById']('sale-payment-method')[_0x421696(0x1e9)],_0x2c360d=parseFloat(document[_0x421696(0x202)]('sale-tax')[_0x421696(0x1e9)])||0x0,_0x5d518c=Array['from'](saleItemsTable[_0x421696(0x26c)]('tr'))['map'](_0x537541=>{const _0x50486c=_0x421696;return{'productId':parseInt(_0x537541['getAttribute'](_0x50486c(0x14e))),'quantity':parseInt(_0x537541['getAttribute'](_0x50486c(0x243))),'price':parseFloat(_0x537541[_0x50486c(0x109)](_0x50486c(0x1bd)))};});if(_0x5d518c['length']===0x0){Swal[_0x421696(0x265)]({'icon':_0x421696(0x229),'title':_0x421696(0x111),'text':_0x421696(0x20b),'confirmButtonText':'حسناً'});return;}const _0x1354bb=_0x5d518c[_0x421696(0x2a5)]((_0xed9be3,_0x347b11)=>_0xed9be3+_0x347b11['price']*_0x347b11[_0x421696(0x199)],0x0),_0x1bf47c=document[_0x421696(0x202)](_0x421696(0x217))[_0x421696(0x1e9)];let _0x5013af=0x0;if(_0x1bf47c){if(_0x1bf47c['includes']('%')){const _0x17ffa5=parseFloat(_0x1bf47c[_0x421696(0x1dd)]('%',''));!isNaN(_0x17ffa5)&&(_0x5013af=_0x1354bb*(_0x17ffa5/0x64));}else{_0x5013af=parseFloat(_0x1bf47c);if(isNaN(_0x5013af))_0x5013af=0x0;}}const _0x450fa6=(_0x1354bb-_0x5013af)*(_0x2c360d/0x64),_0x4aa09b=_0x1354bb-_0x5013af+_0x450fa6,_0x21b746=sales[_0x421696(0x12e)]>0x0?Math[_0x421696(0x267)](...sales[_0x421696(0x1d2)](_0x35a824=>_0x35a824['id']))+0x1:0x1,_0x4f59ce={'id':_0x21b746,'customerId':_0x2cff34||null,'customerName':_0x1583db??_0x421696(0x20d),'customerPhone':_0x148074,'customerAddress':_0x5cd8bd,'date':_0x398594,'items':_0x5d518c,'subtotal':_0x1354bb,'discount':_0x5013af,'tax':_0x450fa6,'total':_0x4aa09b,'paymentMethod':_0x2ff94b,'status':_0x421696(0x118),'notes':_0x31780a};sales[_0x421696(0x24f)](_0x4f59ce),_0x5d518c[_0x421696(0x19e)](_0x590368=>{const _0x5d8afb=_0x421696,_0x4097d1=products[_0x5d8afb(0x11f)](_0x10da8c=>_0x10da8c['id']===_0x590368['productId']);_0x4097d1&&(_0x4097d1['unitsSold']+=_0x590368[_0x5d8afb(0x199)]);}),loadSales(),showSection('sales'),Swal[_0x421696(0x265)]({'icon':_0x421696(0x257),'title':'تم\x20الحفظ\x20بنجاح','text':'تم\x20حفظ\x20فاتورة\x20البيع\x20بنجاح','confirmButtonText':'حسناً'});}function _0x4f2c(){const _0x12aba9=['add-category-btn','setItem','badge\x20badge-','تم\x20حذف\x20فاتورة\x20الشراء\x20بنجاح.','supplier-name','تعديل\x20المورد','تم\x20حفظ\x20إعدادات\x20البريد\x20الإلكتروني\x20بنجاح','cancel-supplier','purchase-invoice-number','1228228YNZKjO','purchase-quantity','print-invoice-btn','شراء','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20edit\x22\x20data-id=\x22','purchase-invoice-business-tax','متجر\x20إلكتروني','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','إضافة\x20فاتورة\x20بيع','customerName','invoice-status','cancel-sale','INV-','categories-section','data-price','تحويل\x20بنكي','includes','src','secondary','smtp-username','inventorySystemSettings','td:nth-child(4)','preventDefault','inventory-movement','info@store.com','purchase-date','invoice-business-phone','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','address','credit','لا\x20يمكن\x20حذف\x20هذا\x20المورد\x20لأنه\x20مرتبط\x20بفواتير\x20شراء.','phone','customer-phone','invoice-business-tax','block','map','product-description','نعم،\x20احذفها!','settings-section','purchase-table','active','نجاح','sale-tax','supplier-notes','dashboard','بطاقة\x20ائتمان','replace','supplier-search','warning','add-sale-btn','purchaseInvoice','sale-items-table','هل\x20أنت\x20متأكد؟','productId','30mNlqcU','store-name','purchase-tax','supplierId','value','purchase-form-title','448AYRUYk','الرجاء\x20اختيار\x20منتج\x20وإدخال\x20كمية\x20وسعر\x20صحيحين','toLowerCase','.xlsx','card','\x22><i\x20class=\x22fas\x20fa-eye\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20delete\x22\x20data-id=\x22','reset','تم\x20إرسال\x20الفاتورة\x20إلى\x20البريد\x20الإلكتروني\x20للعميل','تم\x20استيراد\x20','category-color','تم\x20حفظ\x20فاتورة\x20الشراء\x20بنجاح','array','import-inventory','onload','total-inventory','unitsPurchased','add-product-btn','\x22><i\x20class=\x22fas\x20fa-eye\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','description','add-sale-item','recent-products','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><img\x20src=\x22','تم\x20حذف\x20فاتورة\x20البيع\x20بنجاح.','getElementById','reports','add','style','purchase-payment-method','customer-form-title','.action-btn.view','تم\x20حفظ\x20المنتج\x20بنجاح','إضافة\x20عميل\x20جديد','الرجاء\x20إضافة\x20منتجات\x20إلى\x20الفاتورة','product-form-section','عميل\x20بدون\x20اسم','SheetNames','sales-section','dashboard-section','customerId','shipped','suppliers','290gLsrzn','customer-email','product-id','sale-discount','cancel-category','stringify','high','setAttribute','تم\x20حفظ\x20الفئة\x20بنجاح','store-address','products','.action-btn.edit','td:nth-child(3)','inventory-table','toFixed','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','back-to-purchases','الرجاء\x20اختيار\x20منتج\x20وإدخال\x20كمية\x20صحيحة','تم\x20حذف\x20الفئة\x20بنجاح.','display','حسناً','error','purchase-invoice-supplier-address','barcode','تم\x20حفظ\x20إعدادات\x20الضرائب\x20بنجاح','0112345678','book_new','invoice-customer-phone','addEventListener','الكمية\x20الإجمالية\x20المطلوبة\x20(','keys','option','categoryId','book_append_sheet','invoice-tax','invoice-payment-method','items','low-stock-threshold','123456789','customer-address','className','innerHTML','net-profit','لا\x20يوجد\x20وصف','sale','غير\x20معروف','createdAt','data-quantity','109128PgTAuK','pending','purchase-invoice-items-table','none','files','cancel-product','export-report','\x22><i\x20class=\x22fas\x20fa-edit\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','المشتريات','store-email','info','push','add-customer-btn','invoice-total','parse','result','المبيعات','قيد\x20الانتظار','invoice-business-name','success','type','5962396XffqaY','إلغاء','date','contact-email','#3085d6','إضافة\x20فئة\x20جديدة','top-products','save-category','الرقم\x20الضريبي:\x20','purchase-tax-amount','inventory','product-form','fire','remove','max','تم\x20الحفظ\x20بنجاح','data:image','تقارير_المخزون_والمبيعات.xlsx','lowStockThreshold','querySelectorAll','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','click','11253708cjjoAI','sale-total','customer-id','\x22\x20class=\x22product-image\x22\x20alt=\x22','categories','تم\x20حفظ\x20المورد\x20بنجاح','isConfirmed','cancel-customer','لن\x20تتمكن\x20من\x20استعادة\x20هذا\x20المنتج!','product-name','sale-product','readAsDataURL','out','purchase','Unknown\x20Supplier','sheet_to_json','product-category','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20view\x22\x20data-id=\x22','invoice-date','username','category-description','filter','لن\x20تتمكن\x20من\x20استعادة\x20هذه\x20الفئة!','purchase-items-table','textContent','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20edit\x22\x20data-id=\x22','7342onYdFj','307413dAqlJZ','cancel-purchase','sort','Sheets','invoice-items-table','tax-rate','purchase-total','لن\x20تتمكن\x20من\x20استعادة\x20هذا\x20العميل!','productForm','تم\x20الاستيراد\x20بنجاح','15mDyUtF','invoice-customer-name','store-phone','store-tax-id','sale-customer','password','save-customer','sales-price','change','smtp-security','purchase-invoice-status','customerPhone','13wlmfex','save-supplier','classList','customer-form','sale-quantity','reduce','name','email','sales-table','purchase-price','sale-notes','لا\x20يمكن\x20حذف\x20هذه\x20الفئة\x20لأنها\x20مرتبطة\x20بمنتجات\x20في\x20المخزون.','تم\x20حفظ\x20العميل\x20بنجاح','تم\x20حذف\x20العميل\x20بنجاح.','export-sales','subtotal','product-image','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20class=\x22action-btn\x20delete\x22\x20data-product-id=\x22','getAttribute','saleForm','تم\x20الإرسال\x20بنجاح','inventory-section','sale-date','category-form-title','print-purchases','product-barcode','خطأ','print','test-smtp','paymentMethod','purchasePrice','بيع','data-id','completed','شارع\x20الملك\x20عبدالعزيز،\x20الرياض','131NdKEPz','join','customers','tax','\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','find','submit','status','findIndex','contact-phone','tls','نعم،\x20احذفه!','json_to_sheet','purchase-product','\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','print-purchase-invoice','tax-settings-form','target','مكتمل','notes','length','report-invoices','settings','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x20متاح)','supplier-form-section','purchase-invoice-supplier-phone','string','\x22\x20data-type=\x22','\x22><i\x20class=\x22fas\x20fa-edit\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20delete\x22\x20data-id=\x22','لا\x20يوجد','customer-notes','supplier-address','invoice','لن\x20تتمكن\x20من\x20استعادة\x20هذا\x20المورد!','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','customerAddress','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22badge\x20badge-','657060WmoEwY','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>$','<option\x20value=\x22\x22>اختر\x20زبونا</option>','invoice-subtotal','تعديل\x20المنتج','discount','لن\x20تتمكن\x20من\x20استعادة\x20هذه\x20الفاتورة!','تم\x20الحذف!','report-profit','readAsArrayBuffer','price','categories-table','customer-name','sale-subtotal','data-product-id','#d33','some','toISOString','الكمية\x20المطلوبة\x20(','image-upload','reports-section','store','category-id','بدون\x20فئة','category-form-section','add-purchase-item','invoice-number','supplierForm','purchase-invoice-subtotal','then','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','report-sales','purchase-discount-amount','.action-btn.delete','متاح','customers-section','image-preview','data-section','utils','image','save-purchase','appendChild','category-form','tax-inclusive','customerForm','sale-discount-amount','querySelector','Unknown\x20Product','save-sale','category-name','purchase-form-section','smtp-port','input','invoice-customer-address','sale-tax-amount',')\x20تتجاوز\x20الكمية\x20المتاحة\x20(','sales','smtp','categoryForm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','مورد\x20بدون\x20اسم','data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMyZTg2YWIiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0ibHVjaWRlIGx1Y2lkZS1wYWNrYWdlIj48cGF0aCBkPSJNMTYuNSA5LjRjLTEuNS0xLjQtMy4yLTEuNS00LjItLjVzLS45IDIuNy4zIDQuMmMuNy43IDEuOCAxLjEgMi44LjgiLz48cGF0aCBkPSJNMTIgMmEzIDMgMCAwIDEgMyAzdjJhMyAzIDAgMSAxLTMgM3Y0YTMgMyAwIDAgMS0zIDN2LTJhMyAzIDAgMSAwLTMtM1Y1YTMgMyAwIDAgMSAzLTMiLz48cGF0aCBkPSJNOS41IDQuNWMtMS4xLjgtMS44IDIuNC0xLjUgNC4xLjcgMy40IDQuNCA2LjQgNy44IDUuNyAxLjEtLjIgMi4xLTEgMi44LTEuOC4yLS4zLjEtLjctLjItLjlsLS45LS45Yy0uMi0uMi0uNS0uMi0uNy0uMS0uNy41LTEuNi42LTIuNSAwLS44LS41LTEuMS0xLjQtLjctMi4yLjItLjQuMS0uOC0uMi0xLjFsLS0uOWEuNS41IDAgMCAwLS44IDBjLS4yLjMtLjMuNy0uMyAxLjEgMCAuOC4zIDEuNi44IDIuMSIvPjwvc3ZnPg==','export-customers','low','smtp-host','contact-name','salesPrice','smtp-password','purchase-invoice-business-address','منخفض','نفذ\x20من\x20المخزون','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22status\x20','0.00','slice','purchase-subtotal','purchase-section','color','inclusive','initial-quantity','writeFile','toString','unitsSold','createElement','from','لا\x20يمكن\x20حذف\x20هذا\x20العميل\x20لأنه\x20مرتبط\x20بفواتير\x20مبيعات.','print-report','invoice-business-address','getItem','purchase-supplier','quantity','taxRate','purchase-invoice-payment-method','split','contactName','forEach','supplier-form-title','تم\x20الشحن','.sidebar-menu\x20a','product-form-title','print-dashboard','purchase-discount','supplier-id'];_0x4f2c=function(){return _0x12aba9;};return _0x4f2c();}function deleteSale(_0x510e6a){const _0x3b0e9d=_0x344f57;Swal[_0x3b0e9d(0x265)]({'title':_0x3b0e9d(0x1e3),'text':_0x3b0e9d(0x146),'icon':_0x3b0e9d(0x1df),'showCancelButton':!![],'confirmButtonColor':_0x3b0e9d(0x25d),'cancelButtonColor':_0x3b0e9d(0x14f),'confirmButtonText':_0x3b0e9d(0x1d4),'cancelButtonText':_0x3b0e9d(0x25a)})[_0x3b0e9d(0x15d)](_0x492ef1=>{const _0x3256fe=_0x3b0e9d;if(_0x492ef1[_0x3256fe(0x275)]){const _0x10791c=sales[_0x3256fe(0x11f)](_0x553c66=>_0x553c66['id']===_0x510e6a);_0x10791c&&_0x10791c[_0x3256fe(0x238)][_0x3256fe(0x19e)](_0x5f05df=>{const _0x3e3bf4=_0x3256fe,_0x2ccbe7=products['find'](_0x5e1592=>_0x5e1592['id']===_0x5f05df[_0x3e3bf4(0x1e4)]);_0x2ccbe7&&(_0x2ccbe7[_0x3e3bf4(0x191)]-=_0x5f05df[_0x3e3bf4(0x199)]);}),sales=sales[_0x3256fe(0x284)](_0x5d859c=>_0x5d859c['id']!==_0x510e6a),loadSales(),Swal[_0x3256fe(0x265)]('تم\x20الحذف!',_0x3256fe(0x201),_0x3256fe(0x257));}});}function addPurchaseItem(){const _0x4aac31=_0x344f57,_0xd29c6b=parseInt(purchaseProduct[_0x4aac31(0x1e9)]),_0x4311bc=parseInt(document[_0x4aac31(0x202)](_0x4aac31(0x1b0))[_0x4aac31(0x1e9)]),_0x51e4a5=parseFloat(document[_0x4aac31(0x202)]('purchase-price')[_0x4aac31(0x1e9)]);if(!_0xd29c6b||isNaN(_0x4311bc)||_0x4311bc<=0x0||isNaN(_0x51e4a5)||_0x51e4a5<=0x0){Swal[_0x4aac31(0x265)]({'icon':_0x4aac31(0x229),'title':_0x4aac31(0x111),'text':_0x4aac31(0x1ec),'confirmButtonText':_0x4aac31(0x228)});return;}const _0x579600=products[_0x4aac31(0x11f)](_0x28a625=>_0x28a625['id']===_0xd29c6b);if(!_0x579600)return;const _0x45fb4e=Array[_0x4aac31(0x193)](purchaseItemsTable[_0x4aac31(0x26c)]('tr'))['findIndex'](_0x16c02f=>{const _0x4d5401=_0x4aac31;return parseInt(_0x16c02f[_0x4d5401(0x109)](_0x4d5401(0x14e)))===_0xd29c6b;});if(_0x45fb4e!==-0x1){const _0xcf7eb8=purchaseItemsTable[_0x4aac31(0x26c)]('tr')[_0x45fb4e],_0x250bfb=parseInt(_0xcf7eb8[_0x4aac31(0x109)]('data-quantity')),_0x1c0790=_0x250bfb+_0x4311bc;_0xcf7eb8[_0x4aac31(0x21b)](_0x4aac31(0x243),_0x1c0790),_0xcf7eb8[_0x4aac31(0x16e)](_0x4aac31(0x220))['textContent']=_0x1c0790,_0xcf7eb8[_0x4aac31(0x16e)]('td:nth-child(4)')['textContent']='$'+(_0x1c0790*_0x51e4a5)['toFixed'](0x2);}else{const _0x1130c8=document[_0x4aac31(0x192)]('tr');_0x1130c8[_0x4aac31(0x21b)]('data-product-id',_0xd29c6b),_0x1130c8[_0x4aac31(0x21b)](_0x4aac31(0x243),_0x4311bc),_0x1130c8[_0x4aac31(0x21b)]('data-price',_0x51e4a5),_0x1130c8['innerHTML']=_0x4aac31(0x17b)+_0x579600[_0x4aac31(0x2a6)]+_0x4aac31(0x141)+_0x51e4a5[_0x4aac31(0x222)](0x2)+_0x4aac31(0x1b6)+_0x4311bc+_0x4aac31(0x141)+(_0x4311bc*_0x51e4a5)[_0x4aac31(0x222)](0x2)+_0x4aac31(0x108)+_0xd29c6b+'\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',purchaseItemsTable['appendChild'](_0x1130c8),_0x1130c8[_0x4aac31(0x16e)](_0x4aac31(0x161))[_0x4aac31(0x230)](_0x4aac31(0x26e),_0x1a58ef=>{const _0x416f30=_0x4aac31;_0x1130c8[_0x416f30(0x266)](),updatePurchaseTotal();});}updatePurchaseTotal(),purchaseProduct['value']='',document[_0x4aac31(0x202)](_0x4aac31(0x1b0))[_0x4aac31(0x1e9)]='1',document['getElementById'](_0x4aac31(0x100))[_0x4aac31(0x1e9)]='';}function updatePurchaseTotal(){const _0x23d26f=_0x344f57;let _0x4a412f=0x0;Array['from'](purchaseItemsTable[_0x23d26f(0x26c)]('tr'))[_0x23d26f(0x19e)](_0x3280e1=>{const _0x3e2997=_0x23d26f,_0x4a60d3=parseInt(_0x3280e1['getAttribute'](_0x3e2997(0x243))),_0x367649=parseFloat(_0x3280e1[_0x3e2997(0x109)]('data-price'));_0x4a412f+=_0x4a60d3*_0x367649;});const _0x16d96a=document[_0x23d26f(0x202)]('purchase-discount')[_0x23d26f(0x1e9)];let _0x4b5ddf=0x0;if(_0x16d96a){if(_0x16d96a[_0x23d26f(0x1bf)]('%')){const _0x30de6a=parseFloat(_0x16d96a['replace']('%',''));!isNaN(_0x30de6a)&&(_0x4b5ddf=_0x4a412f*(_0x30de6a/0x64));}else{_0x4b5ddf=parseFloat(_0x16d96a);if(isNaN(_0x4b5ddf))_0x4b5ddf=0x0;}}const _0x393b19=parseFloat(document[_0x23d26f(0x202)](_0x23d26f(0x1e7))['value'])||0x0,_0x576ac3=(_0x4a412f-_0x4b5ddf)*(_0x393b19/0x64),_0x380dc4=_0x4a412f-_0x4b5ddf+_0x576ac3;document[_0x23d26f(0x202)](_0x23d26f(0x18a))['textContent']=_0x4a412f[_0x23d26f(0x222)](0x2),document[_0x23d26f(0x202)]('purchase-discount-amount')[_0x23d26f(0x287)]=_0x4b5ddf[_0x23d26f(0x222)](0x2),document[_0x23d26f(0x202)](_0x23d26f(0x262))[_0x23d26f(0x287)]=_0x576ac3['toFixed'](0x2),document[_0x23d26f(0x202)](_0x23d26f(0x290))[_0x23d26f(0x287)]=_0x380dc4[_0x23d26f(0x222)](0x2);}function savePurchase(){const _0x12d837=_0x344f57,_0x2effb8=parseInt(document[_0x12d837(0x202)](_0x12d837(0x198))[_0x12d837(0x1e9)]),_0x5a93fc=document[_0x12d837(0x202)](_0x12d837(0x1c8))[_0x12d837(0x1e9)],_0x7dc342=document[_0x12d837(0x202)]('purchase-notes')[_0x12d837(0x1e9)],_0x458d73=document[_0x12d837(0x202)](_0x12d837(0x206))['value'],_0x4d3e5e=parseFloat(document[_0x12d837(0x202)](_0x12d837(0x1e7))[_0x12d837(0x1e9)])||0x0,_0x223fa0=Array['from'](purchaseItemsTable[_0x12d837(0x26c)]('tr'))[_0x12d837(0x1d2)](_0x57cfe2=>{const _0xe9665=_0x12d837;return{'productId':parseInt(_0x57cfe2['getAttribute'](_0xe9665(0x14e))),'quantity':parseInt(_0x57cfe2[_0xe9665(0x109)](_0xe9665(0x243))),'price':parseFloat(_0x57cfe2['getAttribute'](_0xe9665(0x1bd)))};});if(_0x223fa0[_0x12d837(0x12e)]===0x0){Swal[_0x12d837(0x265)]({'icon':_0x12d837(0x229),'title':_0x12d837(0x111),'text':'الرجاء\x20إضافة\x20منتجات\x20إلى\x20الفاتورة','confirmButtonText':_0x12d837(0x228)});return;}if(!_0x2effb8){Swal[_0x12d837(0x265)]({'icon':_0x12d837(0x229),'title':_0x12d837(0x111),'text':'الرجاء\x20اختيار\x20مورد','confirmButtonText':'حسناً'});return;}const _0x421b0a=_0x223fa0[_0x12d837(0x2a5)]((_0x200870,_0x3d75ef)=>_0x200870+_0x3d75ef[_0x12d837(0x14a)]*_0x3d75ef[_0x12d837(0x199)],0x0),_0x53ceb6=document[_0x12d837(0x202)](_0x12d837(0x1a4))[_0x12d837(0x1e9)];let _0xc1619c=0x0;if(_0x53ceb6){if(_0x53ceb6[_0x12d837(0x1bf)]('%')){const _0x579dd8=parseFloat(_0x53ceb6[_0x12d837(0x1dd)]('%',''));!isNaN(_0x579dd8)&&(_0xc1619c=_0x421b0a*(_0x579dd8/0x64));}else{_0xc1619c=parseFloat(_0x53ceb6);if(isNaN(_0xc1619c))_0xc1619c=0x0;}}const _0x22b0d8=(_0x421b0a-_0xc1619c)*(_0x4d3e5e/0x64),_0x41afe=_0x421b0a-_0xc1619c+_0x22b0d8,_0x1c1bae=purchases[_0x12d837(0x12e)]>0x0?Math[_0x12d837(0x267)](...purchases[_0x12d837(0x1d2)](_0x218b19=>_0x218b19['id']))+0x1:0x1,_0xdd6c03={'id':_0x1c1bae,'supplierId':_0x2effb8,'date':_0x5a93fc,'items':_0x223fa0,'subtotal':_0x421b0a,'discount':_0xc1619c,'tax':_0x22b0d8,'total':_0x41afe,'paymentMethod':_0x458d73,'status':_0x12d837(0x118),'notes':_0x7dc342};purchases['push'](_0xdd6c03),_0x223fa0[_0x12d837(0x19e)](_0x4df383=>{const _0x163b88=_0x12d837,_0x1e6a7c=products[_0x163b88(0x11f)](_0x2cc32b=>_0x2cc32b['id']===_0x4df383[_0x163b88(0x1e4)]);_0x1e6a7c&&(_0x1e6a7c[_0x163b88(0x1fa)]+=_0x4df383[_0x163b88(0x199)],_0x4df383[_0x163b88(0x14a)]!==_0x1e6a7c[_0x163b88(0x115)]&&(_0x1e6a7c[_0x163b88(0x115)]=_0x4df383[_0x163b88(0x14a)]));}),loadPurchases(),showSection('purchase'),Swal['fire']({'icon':_0x12d837(0x257),'title':_0x12d837(0x268),'text':_0x12d837(0x1f5),'confirmButtonText':_0x12d837(0x228)});}function deletePurchase(_0x124cfb){const _0x3f08cc=_0x344f57;Swal[_0x3f08cc(0x265)]({'title':_0x3f08cc(0x1e3),'text':'لن\x20تتمكن\x20من\x20استعادة\x20هذه\x20الفاتورة!','icon':'warning','showCancelButton':!![],'confirmButtonColor':'#3085d6','cancelButtonColor':'#d33','confirmButtonText':_0x3f08cc(0x1d4),'cancelButtonText':'إلغاء'})['then'](_0x11c985=>{const _0x4ce22f=_0x3f08cc;if(_0x11c985[_0x4ce22f(0x275)]){const _0x417e58=purchases[_0x4ce22f(0x11f)](_0x2efff7=>_0x2efff7['id']===_0x124cfb);_0x417e58&&_0x417e58[_0x4ce22f(0x238)][_0x4ce22f(0x19e)](_0xa6bc62=>{const _0x124343=_0x4ce22f,_0x566f1e=products['find'](_0x1318da=>_0x1318da['id']===_0xa6bc62[_0x124343(0x1e4)]);_0x566f1e&&(_0x566f1e[_0x124343(0x1fa)]-=_0xa6bc62[_0x124343(0x199)]);}),purchases=purchases[_0x4ce22f(0x284)](_0xd428a2=>_0xd428a2['id']!==_0x124cfb),loadPurchases(),Swal[_0x4ce22f(0x265)](_0x4ce22f(0x147),_0x4ce22f(0x1a9),'success');}});}function sendInvoice(){const _0x2bcc86=_0x344f57;Swal['fire']({'icon':_0x2bcc86(0x257),'title':_0x2bcc86(0x10b),'text':_0x2bcc86(0x1f2),'confirmButtonText':_0x2bcc86(0x228)});}function saveStoreSettings(){const _0x3503da=_0x344f57;settings[_0x3503da(0x155)]={'name':document[_0x3503da(0x202)]('store-name')['value'],'address':document[_0x3503da(0x202)](_0x3503da(0x21d))[_0x3503da(0x1e9)],'phone':document[_0x3503da(0x202)]('store-phone')[_0x3503da(0x1e9)],'email':document[_0x3503da(0x202)](_0x3503da(0x24d))[_0x3503da(0x1e9)],'taxId':document[_0x3503da(0x202)](_0x3503da(0x297))[_0x3503da(0x1e9)]},localStorage[_0x3503da(0x1a7)]('inventorySystemSettings',JSON[_0x3503da(0x219)](settings)),Swal[_0x3503da(0x265)]({'icon':'success','title':'تم\x20الحفظ\x20بنجاح','text':'تم\x20حفظ\x20إعدادات\x20المتجر\x20بنجاح','confirmButtonText':'حسناً'});}function saveTaxSettings(){const _0x15d503=_0x344f57;settings[_0x15d503(0x11d)]={'rate':parseFloat(document[_0x15d503(0x202)](_0x15d503(0x28f))['value'])||0x0,'inclusive':document[_0x15d503(0x202)]('tax-inclusive')[_0x15d503(0x1e9)]===_0x15d503(0x18d)},localStorage[_0x15d503(0x1a7)](_0x15d503(0x1c3),JSON[_0x15d503(0x219)](settings)),Swal[_0x15d503(0x265)]({'icon':'success','title':_0x15d503(0x268),'text':_0x15d503(0x22c),'confirmButtonText':'حسناً'});}function saveSmtpSettings(){const _0x21cd29=_0x344f57;settings[_0x21cd29(0x179)]={'host':document[_0x21cd29(0x202)]('smtp-host')[_0x21cd29(0x1e9)],'port':document[_0x21cd29(0x202)](_0x21cd29(0x173))[_0x21cd29(0x1e9)],'username':document['getElementById'](_0x21cd29(0x1c2))['value'],'password':document[_0x21cd29(0x202)](_0x21cd29(0x183))[_0x21cd29(0x1e9)],'security':document['getElementById']('smtp-security')[_0x21cd29(0x1e9)]},localStorage[_0x21cd29(0x1a7)](_0x21cd29(0x1c3),JSON[_0x21cd29(0x219)](settings)),Swal[_0x21cd29(0x265)]({'icon':_0x21cd29(0x257),'title':'تم\x20الحفظ\x20بنجاح','text':_0x21cd29(0x1ac),'confirmButtonText':'حسناً'});}function testSmtpConnection(){const _0x537873=_0x344f57;Swal['fire']({'icon':_0x537873(0x257),'title':_0x537873(0x1d8),'text':'تم\x20اختبار\x20اتصال\x20SMTP\x20بنجاح','confirmButtonText':_0x537873(0x228)});}function loadSettings(){const _0x134dd5=_0x344f57,_0x297f7c=localStorage[_0x134dd5(0x197)](_0x134dd5(0x1c3));_0x297f7c&&(settings=JSON[_0x134dd5(0x252)](_0x297f7c));}function filterProducts(_0x38f9e2){const _0x231d13=_0x344f57,_0x3fb40f=products[_0x231d13(0x284)](_0x1a776f=>_0x1a776f[_0x231d13(0x2a6)]['toLowerCase']()[_0x231d13(0x1bf)](_0x38f9e2['toLowerCase']())||_0x1a776f['description']&&_0x1a776f[_0x231d13(0x1fd)][_0x231d13(0x1ed)]()['includes'](_0x38f9e2[_0x231d13(0x1ed)]())||_0x1a776f[_0x231d13(0x22b)]&&_0x1a776f[_0x231d13(0x22b)]['includes'](_0x38f9e2));inventoryTable[_0x231d13(0x23d)]='',_0x3fb40f[_0x231d13(0x19e)](_0xf215a4=>{const _0x1a6ccc=_0x231d13,_0x44b591=_0xf215a4[_0x1a6ccc(0x1fa)]-_0xf215a4[_0x1a6ccc(0x191)],_0x227a36=categories[_0x1a6ccc(0x11f)](_0x1935d5=>_0x1935d5['id']===_0xf215a4[_0x1a6ccc(0x234)]);let _0x1d10ec='',_0x1882db='';if(_0x44b591<=0x0)_0x1d10ec='نفذ\x20من\x20المخزون',_0x1882db=_0x1a6ccc(0x27b);else _0x44b591<=_0xf215a4['lowStockThreshold']?(_0x1d10ec=_0x1a6ccc(0x185),_0x1882db='low'):(_0x1d10ec=_0x1a6ccc(0x162),_0x1882db='high');const _0x192716=document[_0x1a6ccc(0x192)]('tr');_0x192716[_0x1a6ccc(0x23d)]=_0x1a6ccc(0x200)+(_0xf215a4[_0x1a6ccc(0x167)]||_0x1a6ccc(0x17d))+_0x1a6ccc(0x272)+_0xf215a4[_0x1a6ccc(0x2a6)]+_0x1a6ccc(0x131)+_0xf215a4[_0x1a6ccc(0x2a6)]+_0x1a6ccc(0x1b6)+(_0x227a36?_0x227a36['name']:'بدون\x20فئة')+_0x1a6ccc(0x1b6)+_0xf215a4[_0x1a6ccc(0x115)]['toFixed'](0x2)+_0x1a6ccc(0x1b6)+_0xf215a4['salesPrice']['toFixed'](0x2)+_0x1a6ccc(0x1b6)+_0x44b591+_0x1a6ccc(0x187)+_0x1882db+'\x22>'+_0x1d10ec+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20edit\x22\x20data-id=\x22'+_0xf215a4['id']+_0x1a6ccc(0x137)+_0xf215a4['id']+_0x1a6ccc(0x11e),inventoryTable[_0x1a6ccc(0x169)](_0x192716),_0x192716['querySelector'](_0x1a6ccc(0x21f))[_0x1a6ccc(0x230)](_0x1a6ccc(0x26e),_0x478330=>{const _0x5d70f3=_0x1a6ccc,_0x39d4a9=parseInt(_0x192716[_0x5d70f3(0x16e)](_0x5d70f3(0x21f))['getAttribute']('data-id'));editProduct(_0x39d4a9);}),_0x192716[_0x1a6ccc(0x16e)](_0x1a6ccc(0x161))['addEventListener'](_0x1a6ccc(0x26e),_0x15386f=>{const _0x104f10=_0x1a6ccc,_0x16562c=parseInt(_0x192716['querySelector'](_0x104f10(0x161))[_0x104f10(0x109)](_0x104f10(0x117)));deleteProduct(_0x16562c);});});}function filterCategories(_0x55cf7d){const _0x3b8108=_0x344f57,_0x4084fb=categories['filter'](_0xe01553=>_0xe01553['name'][_0x3b8108(0x1ed)]()[_0x3b8108(0x1bf)](_0x55cf7d[_0x3b8108(0x1ed)]())||_0xe01553[_0x3b8108(0x1fd)]&&_0xe01553[_0x3b8108(0x1fd)]['toLowerCase']()[_0x3b8108(0x1bf)](_0x55cf7d[_0x3b8108(0x1ed)]()));categoriesTable[_0x3b8108(0x23d)]='',_0x4084fb['forEach'](_0x2ca475=>{const _0x47adc2=_0x3b8108,_0x56e38e=products[_0x47adc2(0x284)](_0x3f39da=>_0x3f39da['categoryId']===_0x2ca475['id'])[_0x47adc2(0x12e)],_0x338b42=document['createElement']('tr');_0x338b42[_0x47adc2(0x23d)]=_0x47adc2(0x17b)+_0x2ca475[_0x47adc2(0x2a6)]+_0x47adc2(0x1b6)+(_0x2ca475[_0x47adc2(0x1fd)]||_0x47adc2(0x23f))+_0x47adc2(0x1b6)+_0x56e38e+_0x47adc2(0x13f)+_0x2ca475[_0x47adc2(0x18c)]+'\x22>'+_0x2ca475[_0x47adc2(0x18c)]+_0x47adc2(0x288)+_0x2ca475['id']+_0x47adc2(0x137)+_0x2ca475['id']+'\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',categoriesTable[_0x47adc2(0x169)](_0x338b42),_0x338b42[_0x47adc2(0x16e)](_0x47adc2(0x21f))['addEventListener']('click',_0x30213f=>{const _0x3678be=_0x47adc2,_0x10538b=parseInt(_0x338b42[_0x3678be(0x16e)](_0x3678be(0x21f))[_0x3678be(0x109)](_0x3678be(0x117)));editCategory(_0x10538b);}),_0x338b42[_0x47adc2(0x16e)](_0x47adc2(0x161))[_0x47adc2(0x230)](_0x47adc2(0x26e),_0x245c89=>{const _0x467530=_0x47adc2,_0x5a13b8=parseInt(_0x338b42[_0x467530(0x16e)](_0x467530(0x161))['getAttribute'](_0x467530(0x117)));deleteCategory(_0x5a13b8);});});}function filterSales(_0x56110a){const _0x3959da=_0x344f57,_0xee1fc0=sales[_0x3959da(0x284)](_0x3f0792=>_0x3f0792['id'][_0x3959da(0x190)]()[_0x3959da(0x1bf)](_0x56110a)||_0x3f0792[_0x3959da(0x25b)][_0x3959da(0x1bf)](_0x56110a)||_0x3f0792['customerName']&&_0x3f0792['customerName'][_0x3959da(0x1ed)]()[_0x3959da(0x1bf)](_0x56110a[_0x3959da(0x1ed)]())||_0x3f0792[_0x3959da(0x238)][_0x3959da(0x150)](_0x432730=>{const _0x4e1261=_0x3959da,_0x4113d1=products[_0x4e1261(0x11f)](_0x571d23=>_0x571d23['id']===_0x432730[_0x4e1261(0x1e4)]);return _0x4113d1&&_0x4113d1[_0x4e1261(0x2a6)][_0x4e1261(0x1ed)]()['includes'](_0x56110a['toLowerCase']());}));salesTable['innerHTML']='',_0xee1fc0[_0x3959da(0x19e)](_0x1ce815=>{const _0x5c3a18=_0x3959da,_0x4e31a8=calculateSaleTotal(_0x1ce815),_0x1f6dea=_0x1ce815[_0x5c3a18(0x238)][_0x5c3a18(0x1d2)](_0x3aa693=>{const _0x475a07=_0x5c3a18,_0x46c884=products[_0x475a07(0x11f)](_0x383735=>_0x383735['id']===_0x3aa693[_0x475a07(0x1e4)]);return _0x46c884?_0x46c884['name']:_0x475a07(0x16f);})['join'](',\x20'),_0x1252b3=_0x1ce815['items'][_0x5c3a18(0x1d2)](_0x1a2ebe=>_0x1a2ebe[_0x5c3a18(0x199)])['join'](',\x20');let _0x1b8f77='',_0x261b1e='';switch(_0x1ce815[_0x5c3a18(0x121)]){case _0x5c3a18(0x118):_0x1b8f77=_0x5c3a18(0x12c),_0x261b1e=_0x5c3a18(0x118);break;case _0x5c3a18(0x212):_0x1b8f77=_0x5c3a18(0x1a0),_0x261b1e=_0x5c3a18(0x212);break;case _0x5c3a18(0x245):_0x1b8f77=_0x5c3a18(0x255),_0x261b1e=_0x5c3a18(0x245);break;default:_0x1b8f77=_0x5c3a18(0x241),_0x261b1e='';}const _0x242d97=document[_0x5c3a18(0x192)]('tr');_0x242d97[_0x5c3a18(0x23d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1ce815['id']+_0x5c3a18(0x1b6)+_0x1ce815[_0x5c3a18(0x25b)]+_0x5c3a18(0x1b6)+(_0x1ce815[_0x5c3a18(0x1b8)]||_0x5c3a18(0x20d))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1f6dea+_0x5c3a18(0x1b6)+_0x1252b3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e31a8['toFixed'](0x2)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22status\x20'+_0x261b1e+'\x22>'+_0x1b8f77+_0x5c3a18(0x280)+_0x1ce815['id']+_0x5c3a18(0x1f0)+_0x1ce815['id']+_0x5c3a18(0x11e),salesTable[_0x5c3a18(0x169)](_0x242d97),_0x242d97['querySelector'](_0x5c3a18(0x208))['addEventListener']('click',_0x493f17=>{const _0x15193f=_0x5c3a18,_0x5cb677=parseInt(_0x242d97[_0x15193f(0x16e)](_0x15193f(0x208))[_0x15193f(0x109)](_0x15193f(0x117)));viewInvoice(_0x5cb677,_0x15193f(0x240));}),_0x242d97[_0x5c3a18(0x16e)](_0x5c3a18(0x161))[_0x5c3a18(0x230)]('click',_0x37c20=>{const _0x25cf90=_0x5c3a18,_0x397282=parseInt(_0x242d97[_0x25cf90(0x16e)](_0x25cf90(0x161))['getAttribute'](_0x25cf90(0x117)));deleteSale(_0x397282);});});}function filterPurchases(_0x4c8b36){const _0xff0b1e=_0x344f57,_0x10c43=purchases[_0xff0b1e(0x284)](_0x2c7ced=>_0x2c7ced['id'][_0xff0b1e(0x190)]()['includes'](_0x4c8b36)||_0x2c7ced[_0xff0b1e(0x25b)]['includes'](_0x4c8b36)||suppliers[_0xff0b1e(0x11f)](_0x23a552=>_0x23a552['id']===_0x2c7ced[_0xff0b1e(0x1e8)])?.[_0xff0b1e(0x2a6)][_0xff0b1e(0x1ed)]()[_0xff0b1e(0x1bf)](_0x4c8b36['toLowerCase']())||_0x2c7ced[_0xff0b1e(0x238)]['some'](_0x397f63=>{const _0x454926=_0xff0b1e,_0x53de9d=products[_0x454926(0x11f)](_0x20d919=>_0x20d919['id']===_0x397f63[_0x454926(0x1e4)]);return _0x53de9d&&_0x53de9d[_0x454926(0x2a6)][_0x454926(0x1ed)]()[_0x454926(0x1bf)](_0x4c8b36[_0x454926(0x1ed)]());}));purchaseTable[_0xff0b1e(0x23d)]='',_0x10c43[_0xff0b1e(0x19e)](_0xa93502=>{const _0x491585=_0xff0b1e,_0x2c0190=calculatePurchaseTotal(_0xa93502),_0x49192d=suppliers[_0x491585(0x11f)](_0x75b814=>_0x75b814['id']===_0xa93502[_0x491585(0x1e8)]),_0x71cced=_0x49192d?_0x49192d[_0x491585(0x2a6)]:_0x491585(0x27d),_0xffb6e2=_0xa93502[_0x491585(0x238)][_0x491585(0x1d2)](_0x4b17b3=>{const _0x49d88a=_0x491585,_0x75bef5=products[_0x49d88a(0x11f)](_0x476f82=>_0x476f82['id']===_0x4b17b3[_0x49d88a(0x1e4)]);return _0x75bef5?_0x75bef5['name']:'Unknown\x20Product';})[_0x491585(0x11b)](',\x20'),_0x364411=_0xa93502['items'][_0x491585(0x1d2)](_0x3d3d5c=>_0x3d3d5c['quantity'])['join'](',\x20');let _0x5a5925='',_0x4534b7='';switch(_0xa93502[_0x491585(0x121)]){case _0x491585(0x118):_0x5a5925=_0x491585(0x12c),_0x4534b7='completed';break;case _0x491585(0x212):_0x5a5925=_0x491585(0x1a0),_0x4534b7='shipped';break;case _0x491585(0x245):_0x5a5925=_0x491585(0x255),_0x4534b7='pending';break;default:_0x5a5925='غير\x20معروف',_0x4534b7='';}const _0x1996fd=document['createElement']('tr');_0x1996fd[_0x491585(0x23d)]=_0x491585(0x17b)+_0xa93502['id']+_0x491585(0x1b6)+_0xa93502[_0x491585(0x25b)]+_0x491585(0x1b6)+_0x71cced+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xffb6e2+_0x491585(0x1b6)+_0x364411+_0x491585(0x1b6)+_0x2c0190[_0x491585(0x222)](0x2)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22status\x20'+_0x4534b7+'\x22>'+_0x5a5925+_0x491585(0x280)+_0xa93502['id']+_0x491585(0x1f0)+_0xa93502['id']+'\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',purchaseTable[_0x491585(0x169)](_0x1996fd),_0x1996fd['querySelector'](_0x491585(0x208))['addEventListener'](_0x491585(0x26e),_0x32de51=>{const _0x4854d2=_0x491585,_0x42e30c=parseInt(_0x1996fd[_0x4854d2(0x16e)]('.action-btn.view')['getAttribute'](_0x4854d2(0x117)));viewInvoice(_0x42e30c,'purchase');}),_0x1996fd[_0x491585(0x16e)](_0x491585(0x161))[_0x491585(0x230)]('click',_0x20197f=>{const _0x515413=_0x491585,_0x1fbe7b=parseInt(_0x1996fd['querySelector'](_0x515413(0x161))['getAttribute'](_0x515413(0x117)));deletePurchase(_0x1fbe7b);});});}function filterSuppliers(_0x42012f){const _0x23e103=_0x344f57,_0x5c87af=suppliers[_0x23e103(0x284)](_0x5420ba=>_0x5420ba[_0x23e103(0x2a6)][_0x23e103(0x1ed)]()['includes'](_0x42012f[_0x23e103(0x1ed)]())||_0x5420ba[_0x23e103(0x19d)]&&_0x5420ba[_0x23e103(0x19d)][_0x23e103(0x1ed)]()[_0x23e103(0x1bf)](_0x42012f['toLowerCase']())||_0x5420ba[_0x23e103(0x2a7)]&&_0x5420ba[_0x23e103(0x2a7)][_0x23e103(0x1ed)]()[_0x23e103(0x1bf)](_0x42012f[_0x23e103(0x1ed)]())||_0x5420ba[_0x23e103(0x1ce)]&&_0x5420ba[_0x23e103(0x1ce)][_0x23e103(0x1bf)](_0x42012f));suppliersTable['innerHTML']='',_0x5c87af[_0x23e103(0x19e)](_0x4b3d78=>{const _0x223b81=_0x23e103,_0xf02c2f=purchases['filter'](_0x31df16=>_0x31df16[_0x223b81(0x1e8)]===_0x4b3d78['id'])[_0x223b81(0x12e)],_0x133b99=document['createElement']('tr');_0x133b99[_0x223b81(0x23d)]=_0x223b81(0x17b)+_0x4b3d78[_0x223b81(0x2a6)]+_0x223b81(0x1b6)+_0x4b3d78[_0x223b81(0x19d)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4b3d78[_0x223b81(0x2a7)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4b3d78[_0x223b81(0x1ce)]+_0x223b81(0x1b6)+_0xf02c2f+_0x223b81(0x1b3)+_0x4b3d78['id']+_0x223b81(0x137)+_0x4b3d78['id']+_0x223b81(0x11e),suppliersTable[_0x223b81(0x169)](_0x133b99),_0x133b99['querySelector']('.action-btn.edit')[_0x223b81(0x230)](_0x223b81(0x26e),_0x42f9f4=>{const _0x1a74e7=_0x223b81,_0x2a7f63=parseInt(_0x133b99[_0x1a74e7(0x16e)](_0x1a74e7(0x21f))[_0x1a74e7(0x109)](_0x1a74e7(0x117)));editSupplier(_0x2a7f63);}),_0x133b99[_0x223b81(0x16e)]('.action-btn.delete')[_0x223b81(0x230)](_0x223b81(0x26e),_0x2548d6=>{const _0x5a4131=_0x223b81,_0x444450=parseInt(_0x133b99[_0x5a4131(0x16e)](_0x5a4131(0x161))[_0x5a4131(0x109)](_0x5a4131(0x117)));deleteSupplier(_0x444450);});});}function filterCustomers(_0x4669ed){const _0x151474=_0x344f57,_0x10a547=customers['filter'](_0x33e279=>_0x33e279['name']['toLowerCase']()[_0x151474(0x1bf)](_0x4669ed[_0x151474(0x1ed)]())||_0x33e279[_0x151474(0x2a7)]&&_0x33e279[_0x151474(0x2a7)][_0x151474(0x1ed)]()[_0x151474(0x1bf)](_0x4669ed[_0x151474(0x1ed)]())||_0x33e279[_0x151474(0x1ce)]&&_0x33e279[_0x151474(0x1ce)][_0x151474(0x1bf)](_0x4669ed)||_0x33e279['address']&&_0x33e279[_0x151474(0x1cb)][_0x151474(0x1ed)]()[_0x151474(0x1bf)](_0x4669ed[_0x151474(0x1ed)]()));customersTable[_0x151474(0x23d)]='',_0x10a547[_0x151474(0x19e)](_0x378937=>{const _0x266299=_0x151474,_0xb1342e=sales[_0x266299(0x284)](_0x2d4edc=>_0x2d4edc[_0x266299(0x211)]===_0x378937['id'])['length'],_0x43a243=document['createElement']('tr');_0x43a243[_0x266299(0x23d)]=_0x266299(0x17b)+_0x378937['name']+_0x266299(0x1b6)+_0x378937[_0x266299(0x2a7)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x378937[_0x266299(0x1ce)]+_0x266299(0x1b6)+_0x378937[_0x266299(0x1cb)]+_0x266299(0x1b6)+_0xb1342e+_0x266299(0x1b3)+_0x378937['id']+_0x266299(0x137)+_0x378937['id']+_0x266299(0x11e),customersTable[_0x266299(0x169)](_0x43a243),_0x43a243[_0x266299(0x16e)](_0x266299(0x21f))[_0x266299(0x230)](_0x266299(0x26e),_0x1cc38c=>{const _0x472692=_0x266299,_0x193c9d=parseInt(_0x43a243['querySelector']('.action-btn.edit')['getAttribute'](_0x472692(0x117)));editCustomer(_0x193c9d);}),_0x43a243[_0x266299(0x16e)]('.action-btn.delete')['addEventListener'](_0x266299(0x26e),_0x299058=>{const _0x79eba=_0x266299,_0x130485=parseInt(_0x43a243[_0x79eba(0x16e)](_0x79eba(0x161))[_0x79eba(0x109)](_0x79eba(0x117)));deleteCustomer(_0x130485);});});}function exportToExcel(_0x7001c8,_0x250f96){const _0x17f45f=_0x344f57,_0x527114=XLSX[_0x17f45f(0x166)]['json_to_sheet'](_0x7001c8),_0x146ee9=XLSX[_0x17f45f(0x166)][_0x17f45f(0x22e)]();XLSX[_0x17f45f(0x166)][_0x17f45f(0x235)](_0x146ee9,_0x527114,'Sheet1'),XLSX[_0x17f45f(0x18f)](_0x146ee9,_0x250f96+_0x17f45f(0x1ee));}function importFromExcel(_0x12250d,_0x3d4730){const _0x10cea0=_0x344f57,_0x38c43a=new FileReader();_0x38c43a[_0x10cea0(0x1f8)]=function(_0x46bdff){const _0x5145c5=_0x10cea0,_0x367968=new Uint8Array(_0x46bdff[_0x5145c5(0x12b)][_0x5145c5(0x253)]),_0x4599ba=XLSX['read'](_0x367968,{'type':_0x5145c5(0x1f6)}),_0x1d982c=_0x4599ba[_0x5145c5(0x28d)][_0x4599ba[_0x5145c5(0x20e)][0x0]],_0xc2bcca=XLSX[_0x5145c5(0x166)][_0x5145c5(0x27e)](_0x1d982c);_0x3d4730===_0x5145c5(0x21e)&&(products=_0xc2bcca[_0x5145c5(0x1d2)](_0x1da6e9=>({'id':_0x1da6e9['id']||Math[_0x5145c5(0x267)](...products[_0x5145c5(0x1d2)](_0x2329db=>_0x2329db['id']),0x0)+0x1,'name':_0x1da6e9[_0x5145c5(0x2a6)],'description':_0x1da6e9[_0x5145c5(0x1fd)],'image':_0x1da6e9[_0x5145c5(0x167)],'purchasePrice':_0x1da6e9[_0x5145c5(0x115)],'salesPrice':_0x1da6e9[_0x5145c5(0x182)],'unitsPurchased':_0x1da6e9[_0x5145c5(0x1fa)]||0x0,'unitsSold':_0x1da6e9[_0x5145c5(0x191)]||0x0,'lowStockThreshold':_0x1da6e9[_0x5145c5(0x26b)]||0x5,'barcode':_0x1da6e9['barcode'],'supplierId':_0x1da6e9[_0x5145c5(0x1e8)],'categoryId':_0x1da6e9[_0x5145c5(0x234)],'createdAt':_0x1da6e9[_0x5145c5(0x242)]||new Date()[_0x5145c5(0x151)]()})),loadProducts(),Swal[_0x5145c5(0x265)]({'icon':'success','title':_0x5145c5(0x293),'text':_0x5145c5(0x1f3)+products[_0x5145c5(0x12e)]+'\x20منتجات\x20بنجاح','confirmButtonText':_0x5145c5(0x228)}));},_0x38c43a[_0x10cea0(0x149)](_0x12250d);}function exportReportsToExcel(){const _0xd82a03=_0x344f57,_0x1b9656=XLSX[_0xd82a03(0x166)][_0xd82a03(0x22e)](),_0x4f0b88=sales['map'](_0xee05ee=>({'رقم\x20الفاتورة':_0xee05ee['id'],'التاريخ':_0xee05ee[_0xd82a03(0x25b)],'العميل':_0xee05ee[_0xd82a03(0x1b8)]||_0xd82a03(0x20d),'المجموع\x20الفرعي':_0xee05ee[_0xd82a03(0x106)],'الخصم':_0xee05ee[_0xd82a03(0x145)],'الضريبة':_0xee05ee[_0xd82a03(0x11d)],'المجموع\x20الكلي':_0xee05ee['total'],'طريقة\x20الدفع':getPaymentMethodName(_0xee05ee['paymentMethod']),'الحالة':getStatusName(_0xee05ee['status'])})),_0x3a9842=XLSX[_0xd82a03(0x166)][_0xd82a03(0x126)](_0x4f0b88);XLSX[_0xd82a03(0x166)]['book_append_sheet'](_0x1b9656,_0x3a9842,'المبيعات');const _0x332c27=purchases[_0xd82a03(0x1d2)](_0x3ecb35=>({'رقم\x20الفاتورة':_0x3ecb35['id'],'التاريخ':_0x3ecb35[_0xd82a03(0x25b)],'المورد':suppliers[_0xd82a03(0x11f)](_0x497d30=>_0x497d30['id']===_0x3ecb35[_0xd82a03(0x1e8)])?.[_0xd82a03(0x2a6)]||_0xd82a03(0x17c),'المجموع\x20الفرعي':_0x3ecb35[_0xd82a03(0x106)],'الخصم':_0x3ecb35[_0xd82a03(0x145)],'الضريبة':_0x3ecb35['tax'],'المجموع\x20الكلي':_0x3ecb35['total'],'طريقة\x20الدفع':getPaymentMethodName(_0x3ecb35['paymentMethod']),'الحالة':getStatusName(_0x3ecb35['status'])})),_0x43a499=XLSX[_0xd82a03(0x166)][_0xd82a03(0x126)](_0x332c27);XLSX[_0xd82a03(0x166)][_0xd82a03(0x235)](_0x1b9656,_0x43a499,_0xd82a03(0x24c));const _0xdbb917=products[_0xd82a03(0x1d2)](_0x5a0668=>{const _0x54610e=_0xd82a03,_0x2ad729=_0x5a0668[_0x54610e(0x1fa)]-_0x5a0668['unitsSold'],_0x1c63c6=categories[_0x54610e(0x11f)](_0x325bd2=>_0x325bd2['id']===_0x5a0668[_0x54610e(0x234)]);return{'اسم\x20المنتج':_0x5a0668[_0x54610e(0x2a6)],'الفئة':_0x1c63c6?_0x1c63c6[_0x54610e(0x2a6)]:_0x54610e(0x157),'سعر\x20الشراء':_0x5a0668[_0x54610e(0x115)],'سعر\x20البيع':_0x5a0668['salesPrice'],'الكمية\x20المشتراة':_0x5a0668['unitsPurchased'],'الكمية\x20المباعة':_0x5a0668[_0x54610e(0x191)],'الكمية\x20المتاحة':_0x2ad729,'حد\x20التنبيه':_0x5a0668[_0x54610e(0x26b)],'حالة\x20المخزون':_0x2ad729<=0x0?'نفذ\x20من\x20المخزون':_0x2ad729<=_0x5a0668[_0x54610e(0x26b)]?_0x54610e(0x185):_0x54610e(0x162)};}),_0x1a0d55=XLSX['utils'][_0xd82a03(0x126)](_0xdbb917);XLSX[_0xd82a03(0x166)][_0xd82a03(0x235)](_0x1b9656,_0x1a0d55,'المخزون'),XLSX[_0xd82a03(0x18f)](_0x1b9656,_0xd82a03(0x26a));}function calculateSaleTotal(_0x184a2e){const _0x48629e=_0x344f57;return _0x184a2e[_0x48629e(0x106)]-_0x184a2e[_0x48629e(0x145)]+_0x184a2e[_0x48629e(0x11d)];}function calculatePurchaseTotal(_0x42080b){const _0xd3b1fe=_0x344f57;return _0x42080b[_0xd3b1fe(0x106)]-_0x42080b[_0xd3b1fe(0x145)]+_0x42080b[_0xd3b1fe(0x11d)];}function calculateSaleSubtotal(_0x162240){const _0x3f04a9=_0x344f57;return _0x162240[_0x3f04a9(0x238)][_0x3f04a9(0x2a5)]((_0x91fb19,_0x5b53d9)=>_0x91fb19+_0x5b53d9[_0x3f04a9(0x14a)]*_0x5b53d9[_0x3f04a9(0x199)],0x0);}function calculateSaleDiscount(_0x230345,_0x457112){const _0xb19a67=_0x344f57;if(typeof _0x230345[_0xb19a67(0x145)]===_0xb19a67(0x135)&&_0x230345['discount']['includes']('%')){const _0x1ff312=parseFloat(_0x230345[_0xb19a67(0x145)][_0xb19a67(0x1dd)]('%',''));return _0x457112*(_0x1ff312/0x64);}return parseFloat(_0x230345['discount'])||0x0;}function calculateSaleTax(_0xe94075,_0x42ab3d){const _0x56aa16=_0x344f57;return _0x42ab3d*(_0xe94075[_0x56aa16(0x19a)]/0x64);}function calculatePurchaseSubtotal(_0x3f6063){const _0x47e752=_0x344f57;return _0x3f6063[_0x47e752(0x238)]['reduce']((_0x228346,_0x1493c7)=>_0x228346+_0x1493c7['price']*_0x1493c7[_0x47e752(0x199)],0x0);}function calculatePurchaseDiscount(_0x246170,_0x24cb7b){const _0x30f3ce=_0x344f57;if(typeof _0x246170['discount']===_0x30f3ce(0x135)&&_0x246170[_0x30f3ce(0x145)]['includes']('%')){const _0x319cc9=parseFloat(_0x246170[_0x30f3ce(0x145)][_0x30f3ce(0x1dd)]('%',''));return _0x24cb7b*(_0x319cc9/0x64);}return parseFloat(_0x246170[_0x30f3ce(0x145)])||0x0;}function calculatePurchaseTax(_0x3a6cef,_0x1bc038){return _0x1bc038*(_0x3a6cef['taxRate']/0x64);}function getPaymentMethodName(_0x54cb35){const _0x490e2a=_0x344f57;switch(_0x54cb35){case'cash':return'نقدي';case _0x490e2a(0x1cc):return'آجل';case'bank':return _0x490e2a(0x1be);case _0x490e2a(0x1ef):return _0x490e2a(0x1dc);default:return _0x54cb35;}}function _0x2534(_0x136dbc,_0x1e306e){const _0x4f2cad=_0x4f2c();return _0x2534=function(_0x253414,_0x39dd82){_0x253414=_0x253414-0x100;let _0x38fea3=_0x4f2cad[_0x253414];return _0x38fea3;},_0x2534(_0x136dbc,_0x1e306e);}function getStatusName(_0x65b97f){const _0x35c762=_0x344f57;switch(_0x65b97f){case _0x35c762(0x118):return _0x35c762(0x12c);case'shipped':return _0x35c762(0x1a0);case'pending':return _0x35c762(0x255);default:return _0x65b97f;}}function getStatusClass(_0x430352){const _0x41f95c=_0x344f57;switch(_0x430352){case'completed':return'success';case _0x41f95c(0x212):return _0x41f95c(0x24e);case'pending':return _0x41f95c(0x1df);default:return _0x41f95c(0x1c1);}}document[_0x344f57(0x230)]('DOMContentLoaded',init);